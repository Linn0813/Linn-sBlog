---
title: json-web-token
tags:
---
1. **用户登录**：用户在客户端输入用户名和密码，向服务器发送登录请求👨‍💻。
2. **服务器验证**：服务器接收到登录请求后，验证用户的身份信息。如果验证成功，服务器会根据用户的信息生成一个JWT🎉。
3. **返回JWT**：服务器将生成的JWT返回给客户端。客户端可以将JWT存储在本地，例如使用浏览器的本地存储（Local Storage）或会话存储（Session Storage）💾。
4. **后续请求**：在后续的请求中，客户端将JWT包含在请求头中发送给服务器。通常，JWT会以 `Bearer` 开头，例如：
```plaintext
Authorization: Bearer <JWT>
```
5. **服务器验证**：服务器接收到请求后，会从请求头中提取JWT，并验证其签名。如果签名验证通过，服务器会根据JWT中的声明信息，处理请求并返回响应👍。
  "iat": 1516239022
}
```
在这个例子中，`sub` 表示主题，`name` 是用户的姓名，`iat` 是令牌的签发时间😃。
#### 2.2.3 签名（Signature）
为了创建签名部分，需要使用编码后的头部、编码后的负载、一个秘钥（secret）和头部中指定的签名算法来进行签名。签名的作用是验证消息在传输过程中没有被更改，并且在使用私钥签名的情况下，还可以验证JWT的发送者的身份👍。例如，使用HMAC SHA256算法进行签名的公式如下：
```plaintext
HMACSHA256(
  base64UrlEncode(header) + "." +
  base64UrlEncode(payload),
  secret)
```
通过这个签名，接收方可以验证JWT的完整性和真实性😎。
JWT的结构可以用下面的图片更直观地展示：
![JWT结构](https://p3-search.byteimg.com/obj/labis/228b0d49d1ddd1d2fe94f549ed039c36)
### 2.3 JWT的工作流程
JWT的工作流程通常可以分为以下几个步骤：
}
```
在这个例子中，`alg` 表示使用的签名算法是HMAC SHA256，`typ` 表示令牌的类型是JWT😜。
#### 2.2.2 负载（Payload）
负载部分包含声明（Claims），声明是关于实体（通常是用户）和其他数据的声明。声明分为三种类型：
- **注册声明**：如 `iss`（发行人）、`sub`（主题）、`aud`（受众）等，这些是JWT标准中定义的声明，虽然不是强制要求，但建议使用🤗。
- **公开声明**：由各方自由定义的声明，用于传递一些额外的信息😏。
- **私有声明**：在同意使用的各方之间定义的声明，通常用于特定的业务需求🤔。
以下是一个负载的示例：
```json
{
  "sub": "1234567890",
  "name": "John Doe",
## 二、JWT基础概念
### 2.1 什么是JWT
JWT，即JSON Web Token，是一种用于在网络应用间安全传递声明的开放标准（RFC 7519）😎。简单来说，它是一个紧凑的、自包含的字符串，用于在各方之间安全地传输信息。这个字符串由三部分组成，分别是头部（Header）、负载（Payload）和签名（Signature），就像一个三层的汉堡包🍔，每一层都有其独特的作用。
### 2.2 JWT的组成部分
#### 2.2.1 头部（Header）
头部通常由两部分组成：令牌的类型（通常是JWT）和使用的签名算法，如HMAC SHA256或RSA。头部信息会被Base64Url编码，形成JWT的第一部分。例如：
```json
{
  "alg": "HS256",
  "typ": "JWT"
# 后端JWT认证机制深入解析
## 一、引言
在当今数字化的时代，互联网应用层出不穷，用户与应用之间的交互日益频繁😃。为了确保系统的安全性和用户信息的保密性，用户认证成为了每一个应用都不可或缺的重要环节🤔。想象一下，如果一个在线银行系统没有有效的用户认证机制，任何人都可以随意登录并操作他人的账户，那将会造成多么严重的后果😱。
在众多的用户认证机制中，JWT（JSON Web Token）以其简洁性、安全性和跨域支持等优点，逐渐成为了开发者们的首选👏。它就像是一把安全的钥匙🔑，能够在不同的系统和服务之间安全地传递用户信息，为用户提供了更加便捷和安全的使用体验🎉。本文将深入解析JWT认证机制的原理、实现方法以及在实际应用中的优势，帮助新手小白轻松理解和掌握这一重要的技术🤓。