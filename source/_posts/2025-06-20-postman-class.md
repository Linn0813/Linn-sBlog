---
title: ä»å…¥é—¨åˆ°å®æˆ˜ï¼šä¸€ç¯‡æ–‡ç« æŒæ¡æ¥å£æµ‹è¯•ä¸ Postman å…¨æµç¨‹
date: 2025-06-20 10:09:35
tags:
  - æ¥å£æµ‹è¯•
  - Postman
  - è½¯ä»¶æµ‹è¯•
  - è‡ªåŠ¨åŒ–æµ‹è¯•
  - æµ‹è¯•ç”¨ä¾‹
  - Newman
  - Mock Server
categories:
- æŠ€æœ¯å­¦ä¹  & è¡Œä¸šè¶‹åŠ¿ï¼ˆLearning & Industry Trendsï¼‰
  - æµ‹è¯•æŠ€æœ¯
  - APIæµ‹è¯•
updated: {{current_date_time}}
keywords: æ¥å£æµ‹è¯•, Postman, è½¯ä»¶æµ‹è¯•, è‡ªåŠ¨åŒ–æµ‹è¯•, æµ‹è¯•ç”¨ä¾‹, æ–­è¨€, æ•°æ®é©±åŠ¨æµ‹è¯•, Mock Server
description: 'åˆ†äº«ç å°šæ•™è‚²Postmanè¯¾ç¨‹çš„å­¦ä¹ å†…å®¹ï¼Œè¯¦ç»†ä»‹ç»æ¥å£æµ‹è¯•çš„æ¦‚å¿µã€åˆ†ç±»ã€æµç¨‹ä¸ç”¨ä¾‹è®¾è®¡ï¼Œå…¨é¢è®²è§£ Postman çš„ä½¿ç”¨æ–¹æ³•ï¼ŒåŒ…æ‹¬ç•Œé¢æ“ä½œã€æ–­è¨€è®¾ç½®ã€æ•°æ®é©±åŠ¨æµ‹è¯•å’Œ Mock Server ç­‰åŠŸèƒ½ï¼Œé€‚åˆæ¥å£æµ‹è¯•åˆå­¦è€…ä¸è‡ªåŠ¨åŒ–æµ‹è¯•å…¥é—¨è€…å­¦ä¹ ã€‚'
top_img: /img/postman-class.png
cover: /img/postman-class.png
comments: true
toc: true
toc_number: true
toc_style_simple: false
copyright: true
copyright_author: yuxiaoling
copyright_info: ç‰ˆæƒæ‰€æœ‰ï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚
mathjax: false
katex: false
aplayer: false
highlight_shrink: false
aside: true
abcjs: false
noticeOutdate: falsetags
---

> ğŸš€ è¿™æ˜¯æˆ‘åœ¨ B ç«™è¯¾ç¨‹ã€Šæ¥å£æµ‹è¯•çš„ç®€ä»‹ä¸åˆ†ç±»ã€‹ï¼ˆ[ç‚¹å‡»ç›´è¾¾](https://www.bilibili.com/video/BV11K4y1J7sh?vd_source=65c2968c09490f4b218154711916b4d8)ï¼‰å­¦ä¹ è¿‡ç¨‹ä¸­çš„è¯¦ç»†ç¬”è®°ä¸å®æ“æ€»ç»“ï¼Œé¢å‘æ¥å£æµ‹è¯•åˆå­¦è€…ä¸è‡ªåŠ¨åŒ–æµ‹è¯•å…¥é—¨è€…ï¼Œå¸Œæœ›å¯¹ä½ æœ‰æ‰€å¯å‘ã€‚

---

# ğŸŒ æ¥å£æµ‹è¯•çš„ç®€ä»‹ä¸åˆ†ç±»

## â“ ä»€ä¹ˆæ˜¯æ¥å£æµ‹è¯•ï¼Ÿ

æ¥å£æµ‹è¯•æ˜¯æŒ‡å¯¹ç³»ç»Ÿç»„ä»¶ä¹‹é—´çš„æ•°æ®ä¼ é€’ã€ä¸šåŠ¡é€»è¾‘æ¥å£ç­‰å†…å®¹è¿›è¡Œæµ‹è¯•ï¼ŒéªŒè¯å„æ¨¡å—é—´æ˜¯å¦èƒ½æ­£ç¡®äº¤äº’ä¸åä½œã€‚ğŸ”

## ğŸ“‚ æ¥å£æµ‹è¯•åˆ†ç±»ï¼š

* **å¤–éƒ¨æ¥å£æµ‹è¯•**
  ç³»ç»Ÿå¯¹æ¥å¤–éƒ¨ç¬¬ä¸‰æ–¹æœåŠ¡ï¼Œå¦‚æ”¯ä»˜æ¥å£ã€ç‰©æµæ¥å£ï¼Œä¸»è¦éªŒè¯æ­£å‘åŠŸèƒ½ã€‚
  â—‹ åªéœ€éªŒè¯æ­£ä¾‹ï¼ˆæ¥å£æ˜¯å¦è¿”å›æˆåŠŸï¼‰âœ…

* **å†…éƒ¨æ¥å£æµ‹è¯•**
  â—‹ â‘  å†…éƒ¨è°ƒç”¨æ¥å£ï¼šæ¨¡å—ä¹‹é—´å¯¹æ¥ä½¿ç”¨ï¼Œå¦‚é¢„ç®—ç³»ç»Ÿä¸æ‰¿ä¿ç³»ç»Ÿã€‚
  â–  åªéœ€éªŒè¯æ­£ä¾‹
  â—‹ â‘¡ å¼€æ”¾ç»™å¤–éƒ¨çš„å†…éƒ¨æ¥å£ï¼šä¸šåŠ¡æ ¸å¿ƒæ¥å£ï¼Œå¦‚ App ç«¯è°ƒç”¨åç«¯æ¥å£ã€‚
  â–  éœ€éªŒè¯æ­£ä¾‹ + å¼‚å¸¸ + æƒé™ + å®‰å…¨æ€§

| åˆ†ç±»     | å…¸å‹åœºæ™¯                | æµ‹è¯•é‡ç‚¹               | æ‰©å±•æµ‹è¯•ç‚¹            |
| ------ | ------------------- | ------------------ | ---------------- |
| å¤–éƒ¨æ¥å£   | ç¬¬ä¸‰æ–¹æ”¯ä»˜ã€ç‰©æµæŸ¥è¯¢          | æ­£å‘æµç¨‹ï¼ˆå¦‚æ”¯ä»˜ä¸‹å• - å›è°ƒé€šçŸ¥ï¼‰ | ç½‘ç»œå¼‚å¸¸ï¼ˆæ–­ç½‘ã€è¶…æ—¶ï¼‰ã€é™æµå¤„ç† |
| å†…éƒ¨æ¥å£   | ç”µå•†ç³»ç»Ÿâ€œåº“å­˜æ‰£å‡â€ä¸â€œè®¢å•åˆ›å»ºâ€å¯¹æ¥ | æ•°æ®ä¸€è‡´æ€§ï¼ˆåº“å­˜æ‰£å‡å¤±è´¥æ—¶è®¢å•å›æ»šï¼‰ | å¹¶å‘è°ƒç”¨ï¼ˆå¤šç”¨æˆ·åŒæ—¶ä¸‹å•é”æœºåˆ¶ï¼‰ |
| å¼€æ”¾å†…éƒ¨æ¥å£ | App ç«¯ç”¨æˆ·ç™»å½•æ¥å£         | æƒé™æ ¡éªŒã€SQL æ³¨å…¥é˜²æŠ¤      | æ•æ„Ÿæ•°æ®åŠ å¯†ï¼ˆå¯†ç ä¼ è¾“åŠ å¯†ï¼‰ğŸ”’ |

---

# ğŸ” æ¥å£æµ‹è¯•çš„æµç¨‹ä¸ç”¨ä¾‹è®¾è®¡

### 1ï¸âƒ£ ç†Ÿæ‚‰æ¥å£

* è·å–æ–¹å¼ï¼š
  â—‹ æŸ¥çœ‹æ¥å£æ–‡æ¡£
  â—‹ æŠ“åŒ…å·¥å…·ï¼ˆå¦‚ Charles/Fiddlerï¼‰è§‚å¯Ÿè¯·æ±‚

* ç†Ÿæ‚‰å†…å®¹ï¼š
  â—‹ æ¥å£åœ°å€ã€è¯·æ±‚æ–¹å¼ï¼ˆGET/POSTç­‰ï¼‰
  â—‹ é‰´æƒæœºåˆ¶ï¼ˆToken/Cookieï¼‰
  â—‹ è¯·æ±‚å‚æ•°ä¸å“åº”ç»“æ„
  â—‹ çŠ¶æ€ç åŠé”™è¯¯ç å®šä¹‰

---

### 2ï¸âƒ£ ç¼–å†™æ¥å£æµ‹è¯•ç”¨ä¾‹

* ç”¨ä¾‹è®¾è®¡æ€è·¯ï¼š

  * æ­£ä¾‹ï¼š
    â—‹ åˆç†å…¥å‚ + æ­£ç¡®é‰´æƒ â†’ è¿”å›æˆåŠŸç»“æœ

  * åä¾‹ï¼š
    â—‹ é‰´æƒç±»ï¼šToken ç¼ºå¤±ã€é”™è¯¯ã€è¿‡æœŸ
    â—‹ å‚æ•°ç±»ï¼šå‚æ•°ä¸ºç©ºã€æ ¼å¼é”™è¯¯ã€ç±»å‹/é•¿åº¦ä¸ç¬¦
    â—‹ ä¸šåŠ¡ç±»ï¼šé”™è¯¯ç éªŒè¯ã€è¾¹ç•Œå€¼ã€åˆ†é¡µé€»è¾‘
    â—‹ å®‰å…¨ç±»ï¼šé»‘åå•ç”¨æˆ·ã€è®¿é—®é¢‘ç‡é™åˆ¶ã€æƒé™éªŒè¯

---

### 3ï¸âƒ£ æ‰§è¡Œæ¥å£æµ‹è¯•

* ä½¿ç”¨ Postman ç¼–å†™è¯·æ±‚ï¼Œç®¡ç†é›†åˆå’Œç¯å¢ƒå˜é‡
* æ‰‹åŠ¨è°ƒè¯•ï¼Œç¡®è®¤åŠŸèƒ½é€»è¾‘æ­£ç¡®

---

### 4ï¸âƒ£ æŒç»­é›†æˆ

* ä½¿ç”¨ Newman æ‰§è¡Œ Postman è„šæœ¬
* å°†æµ‹è¯•é›†æˆè‡³ Jenkins æµæ°´çº¿ï¼Œè¾“å‡ºæµ‹è¯•æŠ¥å‘Šï¼Œå¹¶é€šè¿‡é‚®ä»¶/é’‰é’‰åŒæ­¥ç»“æœ ğŸ“©

---

# ğŸ§° Postman ç®€ä»‹ä¸ä»‹ç»

## ç•Œé¢è¯´æ˜

* Homeï¼šä¸»é¡µ
* Workspacesï¼šå·¥ä½œç©ºé—´ç®¡ç†
* Collectionsï¼šæ¥å£é›†åˆç®¡ç†
* APIsï¼šAPI æ–‡æ¡£ç®¡ç†
* Environmentsï¼šç¯å¢ƒå˜é‡ä¸å…¨å±€å˜é‡
* Mock Serverï¼šè™šæ‹ŸæœåŠ¡å™¨
* Monitorsï¼šå®šæ—¶ç›‘æ§å™¨
* Historyï¼šå†å²è¯·æ±‚è®°å½•

---

## è¯·æ±‚é¡µé¢è¯´æ˜

* Paramsï¼šGET è¯·æ±‚å‚æ•°
* Authorizationï¼šè®¾ç½® Tokenã€Basic Auth ç­‰é‰´æƒæ–¹å¼
* Headersï¼šè¯·æ±‚å¤´ï¼ˆå¦‚ Content-Typeã€Cookie ç­‰ï¼‰
* Bodyï¼ˆPOST è¯·æ±‚å‚æ•°ï¼‰ï¼š

  * noneï¼šä¸ä¼ å‚æ•°
  * form-dataï¼šæ”¯æŒé”®å€¼å¯¹å’Œæ–‡ä»¶
  * x-www-form-urlencodedï¼šè¡¨å•é”®å€¼å¯¹
  * rawï¼šjsonã€textã€xmlã€htmlã€JavaScriptã€textç­‰åŸå§‹æ ¼å¼
  * binaryï¼šæ–‡ä»¶ä¸Šä¼ ï¼ˆäºŒè¿›åˆ¶ï¼‰
* pre-request scriptï¼šè¯·æ±‚å‰æ‰§è¡Œ JS è„šæœ¬
* testsï¼šè¯·æ±‚åæ‰§è¡Œæ–­è¨€
* cookiesï¼šç®¡ç† Cookie ä¿¡æ¯

---

## å“åº”é¡µç­¾è¯´æ˜

* Bodyï¼šè¿”å›å†…å®¹
* Prettyï¼šä»¥ Jsonã€htmlã€XML ç­‰æ ¼å¼æŸ¥çœ‹æ•°æ®
* Rawï¼šæ–‡æœ¬æ–¹å¼æŸ¥çœ‹æ•°æ®
* Previewï¼šç½‘é¡µæ–¹å¼æŸ¥çœ‹æ•°æ®
* Cookiesï¼šå“åº”ä¸­è¿”å›çš„ Cookie
* Headersï¼šå“åº”å¤´
* Test Resultsï¼šæ–­è¨€æ‰§è¡Œç»“æœ
* çŠ¶æ€ç ä¸å“åº”ä¿¡æ¯ï¼š

  * 200ï¼šOK
  * å“åº”æ—¶é—´ï¼ˆå¦‚ 681msï¼‰
  * å“åº”å¤§å°ï¼ˆå¦‚ 343Bï¼‰

---

# é¢è¯•é¢˜

## Getè¯·æ±‚å’ŒPostè¯·æ±‚çš„åŒºåˆ«

1. get è¯·æ±‚ä¸€èˆ¬æ˜¯è·å–æ•°æ®ï¼Œpost è¯·æ±‚ä¸€èˆ¬æ˜¯æäº¤æ•°æ®ã€‚
2. post è¯·æ±‚æ¯” get è¯·æ±‚æ›´å®‰å…¨ã€‚
3. æœ¬è´¨åŒºåˆ«æ˜¯ä¼ å‚æ–¹å¼ä¸åŒï¼š

* get è¯·æ±‚åœ¨åœ°å€æ åé¢ä»¥ ? æ–¹å¼ä¼ å‚ï¼Œå¤šä¸ªå‚æ•°ç”¨ & åˆ†éš”ã€‚
* post è¯·æ±‚åœ¨ body ä»¥è¡¨å•æ–¹å¼ä¼ å‚ã€‚

---

# ç¯å¢ƒå˜é‡ä¸å…¨å±€å˜é‡

* ç¯å¢ƒå˜é‡ï¼šé™å®šäºç‰¹å®šç¯å¢ƒï¼ˆå¦‚ dev/test/prodï¼‰ï¼Œvariable å‘½åå¿…é¡»ä¸€è‡´ï¼Œæ¥å£åœ°å€ä¸­ä½¿ç”¨ {{variableå‘½å}}ã€‚
* å…¨å±€å˜é‡ï¼šæ‰€æœ‰ç¯å¢ƒã€æ‰€æœ‰æ¥å£å…±äº«ï¼Œè·¨æ¥å£å…±äº«æ•°æ®ï¼ˆå¦‚ç™»å½• Tokenã€ç”¨æˆ· IDï¼‰ã€‚
* è·å–ç¯å¢ƒå˜é‡å’Œå…¨å±€å˜é‡çš„å€¼é€šè¿‡ {{å˜é‡å}}ã€‚

| ç±»å‹   | ä½œç”¨åŸŸ     | å…¸å‹ç”¨é€”                 | ä¼˜å…ˆçº§ï¼ˆå†²çªæ—¶ï¼‰ |
| ---- | ------- | -------------------- | -------- |
| ç¯å¢ƒå˜é‡ | é™å®šäºç‰¹å®šç¯å¢ƒ | ä¸åŒç¯å¢ƒçš„é…ç½®å·®å¼‚ï¼ˆAPI åŸŸåã€ç«¯å£ï¼‰ | é«˜äºå…¨å±€å˜é‡   |
| å…¨å±€å˜é‡ | æ‰€æœ‰ç¯å¢ƒå…±äº«  | è·¨æ¥å£å…±äº«æ•°æ®              | ä½äºç¯å¢ƒå˜é‡   |

---

# æ¥å£å…³è”

### JSON æå–å™¨

ç¬¬ä¸€ä¸ªæ¥å£:

```js
//ä½¿ç”¨jsonæå–å™¨æå–accesss_tokenå€¼ã€‚

//æŠŠè¿”å›çš„å­—ç¬¦ä¸²æ ¼å¼çš„æ•°æ®è½¬æ¢æˆå¯¹è±¡çš„å½¢å¼ã€‚
var result = JSON.parse(responseBody);

//æŠŠaccess_tokenè®¾ç½®ä¸ºå…¨å±€å˜é‡
pm.globals.set("access_token",result.access_tokern);
```

ç¬¬äºŒä¸ªæ¥å£:

```
{{access_token}}
```

---

### æ­£åˆ™è¡¨è¾¾å¼æå–å™¨

ç¬¬ä¸€ä¸ªæ¥å£:

```js
//ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æå–å™¨å®ç°æ¥å£å…³è”,matchåŒ¹é…ã€‚
var result = responseBody.match(new RegExp('"access_token":"(.*?)"')) 
console.log(result[1]);
//è®¾ç½®ä¸ºå…¨å±€å˜é‡
pm.globals.set("access_token",result[1])
```

ç¬¬äºŒä¸ªæ¥å£:

```
{{access_token}}
```

---

# âš¡ åŠ¨æ€å‚æ•°

Postman å†…ç½®åŠ¨æ€å‚æ•°ï¼š

### 1. æ—¶é—´ä¸æ—¥æœŸç±» â°

| å‚æ•°                 | æ ¼å¼ç¤ºä¾‹                     | å…¸å‹ç”¨é€”               |
| ------------------ | ------------------------ | ------------------ |
| {{\$timestamp}}    | 1689345678ï¼ˆç§’çº§ï¼‰           | ç”Ÿæˆå½“å‰æ—¶é—´æˆ³ï¼ˆå¦‚ç­¾åè®¡ç®—ï¼‰     |
| {{\$randomDate}}   | 2025-06-18T12:34:56Z     | éšæœºæ—¥æœŸï¼ˆæµ‹è¯•è®¢å•æœ‰æ•ˆæœŸï¼‰      |
| {{\$isoTimestamp}} | 2025-06-18T12:34:56.789Z | ç¬¦åˆ ISO 8601 æ ¼å¼çš„æ—¶é—´æˆ³ |

**ä½¿ç”¨æ–¹æ³•ï¼š**

```js
// åœ¨ pre-request script ä¸­ç»„åˆå‚æ•°
pm.environment.set("orderId", "ORD_" + Date.now());
// è¯·æ±‚ URL ä¸­ä½¿ç”¨ï¼šhttps://api.com/order/{{orderId}}
```

---

### 2. éšæœºæ•°æ®ç±» ğŸ²

| å‚æ•°                 | æ ¼å¼ç¤ºä¾‹                                 | å…¸å‹ç”¨é€”                           |
| ------------------ | ------------------------------------ | ------------------------------ |
| {{\$randomInt}}    | 345ï¼ˆ0-1000 å†…éšæœºæ•°ï¼‰                     | æµ‹è¯•åˆ†é¡µå¤§å°ï¼ˆå¦‚ size={{\$randomInt}}ï¼‰ |
| {{\$randomString}} | abcdef12345ï¼ˆ16 ä½éšæœºå­—ç¬¦ä¸²ï¼‰               | ç”Ÿæˆéšæœºç”¨æˆ·å                        |
| {{\$guid}}         | 5f7d3a9c-1b2e-4c3d-8e9f-0a1b2c3d4e5f | å”¯ä¸€æ ‡è¯†ç¬¦ï¼ˆæµ‹è¯•åˆ†å¸ƒå¼ IDï¼‰                |

---

### 3. æ¨¡æ‹Ÿæ•°æ®ç±» ğŸ§ª

| å‚æ•°                | æ ¼å¼ç¤ºä¾‹                                              | å…¸å‹ç”¨é€”                  |
| ----------------- | ------------------------------------------------- | --------------------- |
| {{\$email}}       | [user567@example.com](mailto:user567@example.com) | æ³¨å†Œæµ‹è¯•ï¼ˆéšæœºé‚®ç®±ï¼‰            |
| {{\$phoneNumber}} | +1 (555) 123-4567                                 | æµ‹è¯•çŸ­ä¿¡éªŒè¯ç æ¥å£             |
| {{\$creditCard}}  | 4111 1111 1111 1111                               | æ”¯ä»˜æ¨¡æ‹Ÿï¼ˆéœ€é…åˆ Mock Serverï¼‰ |

---

### è‡ªå®šä¹‰åŠ¨æ€å‚æ•°

```js
// æ‰‹åŠ¨è·å¾—æ—¶é—´æˆ³
var times = Date.now();
// è®¾ç½®ä¸ºå…¨å±€å˜é‡
pm.globals.set("times", times);
```

**ä½¿ç”¨æ—¶è°ƒç”¨ï¼š**

```
{{times}}
```

---

# ğŸ“Š Postman æ–­è¨€

## å¸¸è§„å…­ç§æ–­è¨€

### 1. Status codeï¼šCode is 200ï¼ˆçŠ¶æ€ç æ–­è¨€ï¼‰âœ…

**ä½œç”¨ï¼š** éªŒè¯æ¥å£è¿”å›çš„ HTTP çŠ¶æ€ç æ˜¯å¦ç¬¦åˆé¢„æœŸï¼ˆå¦‚ 200ã€404 ç­‰ï¼‰ã€‚
**ç¤ºä¾‹ä»£ç ï¼š**

```js
pm.test("çŠ¶æ€ç åº”ä¸º 200", function() {
    pm.response.to.have.status(200);
});
```

**æ‰©å±•åœºæ™¯ï¼š**

* éªŒè¯å®¢æˆ·ç«¯é”™è¯¯ï¼ˆ4xxï¼‰ï¼š`pm.response.to.have.status(401)`ï¼ˆæœªæˆæƒï¼‰ï¼›
* éªŒè¯æœåŠ¡å™¨é”™è¯¯ï¼ˆ5xxï¼‰ï¼š`pm.response.to.have.status(500)`ï¼ˆå†…éƒ¨é”™è¯¯ï¼‰ã€‚

---

### 2. Responsebodyï¼šContains stringï¼ˆå“åº”ä½“åŒ…å«å­—ç¬¦ä¸²æ–­è¨€ï¼‰ğŸ”

**ä½œç”¨ï¼š** æ£€æŸ¥å“åº”å†…å®¹æ˜¯å¦åŒ…å«æŒ‡å®šå­—ç¬¦ä¸²ï¼ˆæ”¯æŒæ–‡æœ¬ã€JSONã€XML ç­‰æ ¼å¼ï¼‰ã€‚
**ç¤ºä¾‹ä»£ç ï¼š**

```js
pm.test("å“åº”ä½“åŒ…å« success", function() {
    pm.expect(pm.response.text()).to.include("success");
});
```

**æ³¨æ„äº‹é¡¹ï¼š**

* è‹¥å“åº”ä¸º JSONï¼Œéœ€å…ˆé€šè¿‡ `pm.response.json()` è§£æï¼›
* åŒºåˆ†å¤§å°å†™ï¼ˆå¦‚ "Success" ä¸ "success" ä¸åŒï¼‰ï¼Œå¯é€šè¿‡ `to.include("success", {ignoreCase: true})` å¿½ç•¥å¤§å°å†™ã€‚

---

### 3. Responsebodyï¼šJson value checkï¼ˆJSON å€¼æ–­è¨€ï¼‰ğŸ§¾

**ä½œç”¨ï¼š** éªŒè¯å“åº” JSON ä¸­ç‰¹å®šå­—æ®µçš„å€¼æ˜¯å¦ç¬¦åˆé¢„æœŸã€‚
**ç¤ºä¾‹ä»£ç ï¼š**

```js
pm.test("ç”¨æˆ· ID åº”ä¸º 123", function() {
    const responseJson = pm.response.json();
    pm.expect(responseJson.user.id).to.eql(123);  // ä¸¥æ ¼ç­‰äº
});
```

**å¤šå±‚åµŒå¥—åœºæ™¯ï¼š**

```js
// å“åº”ç»“æ„ï¼š{ "data": { "list": [{"id": "ORD001"}] } }
pm.test("ç¬¬ä¸€ä¸ªè®¢å• ID æ­£ç¡®", function() {
    const id = pm.response.json().data.list[0].id;
    pm.expect(id).to.eql("ORD001");
});
```

---

### 4. Responsebodyï¼šis equal to a stringï¼ˆå“åº”ä½“ç­‰äºå­—ç¬¦ä¸²æ–­è¨€ï¼‰ğŸ“

**ä½œç”¨ï¼š** éªŒè¯å“åº”å†…å®¹ä¸æŒ‡å®šå­—ç¬¦ä¸²å®Œå…¨ä¸€è‡´ï¼ˆè¾ƒå°‘ä½¿ç”¨ï¼Œå› å“åº”å¸¸å«åŠ¨æ€æ•°æ®ï¼‰ã€‚
**ç¤ºä¾‹ä»£ç ï¼š**

```js
pm.test("å“åº”ä½“ç­‰äºæŒ‡å®šå­—ç¬¦ä¸²", function() {
    pm.expect(pm.response.text()).to.eql('{"status": "ok"}');
});
```

**ä¼˜åŒ–å»ºè®®ï¼š**

* é¿å…ç›´æ¥æ–­è¨€å®Œæ•´å“åº”ä½“ï¼Œå¯æ‹†åˆ†å­—æ®µæ–­è¨€ï¼›
* å¯¹åŠ¨æ€å­—æ®µï¼ˆå¦‚æ—¶é—´æˆ³ï¼‰ä½¿ç”¨é€šé…ç¬¦æˆ–æ­£åˆ™è¡¨è¾¾å¼ï¼ˆéœ€ç»“åˆ Chai åº“ï¼‰ã€‚

---

### 5. Response headersï¼šContent-Type...ï¼ˆå“åº”å¤´æ–­è¨€ï¼‰ğŸ“‹

**ä½œç”¨ï¼š** æ£€æŸ¥å“åº”å¤´æ˜¯å¦åŒ…å«æŒ‡å®šå­—æ®µï¼ˆå¦‚ Content-Typeã€Authorizationï¼‰ã€‚
**ç¤ºä¾‹ä»£ç ï¼š**

```js
// æ–­è¨€å­˜åœ¨ Content-Type å¤´
pm.test("å“åº”å¤´åŒ…å« Content-Type", function() {
    pm.response.to.have.header("Content-Type");
});

// æ–­è¨€ Content-Type ä¸º JSON æ ¼å¼
pm.test("Content-Type åº”ä¸º application/json", function() {
    pm.response.to.have.header("Content-Type", "application/json");
});
```

---

### 6. Response time is less than 200msï¼ˆå“åº”æ—¶é—´æ–­è¨€ï¼‰â±ï¸

**ä½œç”¨ï¼š** éªŒè¯æ¥å£å“åº”æ—¶é—´æ˜¯å¦å°äºæŒ‡å®šæ¯«ç§’æ•°ï¼ˆç”¨äºæ€§èƒ½åˆæ­¥æµ‹è¯•ï¼‰ã€‚
**ç¤ºä¾‹ä»£ç ï¼š**

```js
pm.test("å“åº”æ—¶é—´åº”å°äº 200ms", function() {
    pm.expect(pm.response.responseTime).to.be.below(200);
});
```

**æ‰©å±•ç”¨æ³•ï¼š**

* æ–­è¨€å“åº”æ—¶é—´åœ¨åŒºé—´å†…ï¼š`pm.expect(responseTime).to.be.within(100, 300)`ï¼›
* ç»“åˆç¯å¢ƒå˜é‡åŠ¨æ€è®¾ç½®é˜ˆå€¼ï¼š`pm.expect(responseTime).to.be.below(pm.environment.get("maxResponseTime"))`ã€‚

---

# ğŸ”§ åœ¨æ–­è¨€ä¸­è·å–è‡ªå®šä¹‰åŠ¨æ€å‚æ•°çš„æ–¹å¼

| è·å–æ–¹å¼                  | è¯­æ³•ç¤ºä¾‹                    | é€‚ç”¨åœºæ™¯        | æ³¨æ„äº‹é¡¹                                         |
| --------------------- | ----------------------- | ----------- | -------------------------------------------- |
| pm.globals.get("å‚æ•°å") | pm.globals.get("times") | æ¨èé€šç”¨å†™æ³•ï¼Œå…¼å®¹æ€§å¼º | éœ€é€šè¿‡ pm ä¸Šä¸‹æ–‡è°ƒç”¨ï¼Œé€‚ç”¨äº Pre-request Scriptã€Tests è„šæœ¬ |
| globals\["å‚æ•°å"]       | globals\["times"]       | é”®ååŠ¨æ€æ‹¼æ¥åœºæ™¯    | æ—§ç‰ˆæœ¬ Postman å¯èƒ½ä¸æ”¯æŒ                            |
| globals.å‚æ•°å           | globals.times           | é”®åæ— ç‰¹æ®Šå­—ç¬¦æ—¶ç®€å†™  | å‚æ•°åå«ç‰¹æ®Šå­—ç¬¦éœ€ç”¨æ–¹æ‹¬å·è®¿é—®                              |

---

# ğŸŒ å…¨å±€æ–­è¨€

## å®ç°å…¨å±€æ–­è¨€çš„ä¸‰ç§æ–¹æ¡ˆ

### æ–¹æ¡ˆ 1ï¼šåœ¨ Collection ä¸­ç¼–å†™å…¬å…±æµ‹è¯•è„šæœ¬

**åŸç†ï¼š** åœ¨ Collection çš„ Tests æ ‡ç­¾é¡µä¸­ç¼–å†™æ–­è¨€ï¼Œå¯¹é›†åˆå†…æ‰€æœ‰æ¥å£ç”Ÿæ•ˆã€‚
**ç¤ºä¾‹ä»£ç ï¼š**

```js
pm.test("å…¨å±€çŠ¶æ€ç æ ¡éªŒ", function() {
    pm.response.to.be.success;  // æ–­è¨€çŠ¶æ€ç ä¸º2xx
});

pm.test("å…¨å±€å“åº”å¤´æ ¡éªŒ", function() {
    pm.response.to.have.header("Content-Type");
    pm.expect(pm.response.headers.get("Content-Type")).to.include("json");
});
```

**æ³¨æ„äº‹é¡¹ï¼š**

* é›†åˆçº§æ–­è¨€ä¼˜å…ˆçº§ä½äºå•ä¸ªæ¥å£æ–­è¨€ï¼›
* å¯ç”¨ `pm.info.requestName` åˆ¤æ–­æ¥å£åï¼Œå®ç°æ¡ä»¶æ–­è¨€ï¼š

```js
if (pm.info.requestName !== "å¥åº·æ£€æŸ¥æ¥å£") {
    pm.response.to.have.status(200);  // æ’é™¤ç‰¹å®šæ¥å£
}
```

---

### æ–¹æ¡ˆ 2ï¼šä½¿ç”¨å‰ç½®è„šæœ¬ï¼ˆPre-request Scriptï¼‰åŠ¨æ€æ³¨å…¥æ–­è¨€

**ç¤ºä¾‹ä»£ç ï¼š**

```js
// åœ¨ Collection æˆ– Folder çš„ Pre-request Script ä¸­æ·»åŠ 
function addGlobalAssertion() {
    // åŠ¨æ€ç”Ÿæˆæ–­è¨€ä»£ç å­—ç¬¦ä¸²
    const script = `
        pm.test("å…¨å±€å“åº”æ—¶é—´æ ¡éªŒ", function() {
            pm.expect(pm.response.responseTime).to.be.below(${pm.environment.get("maxResponseTime") || 1000});
        });
    `;
    // å°†æ–­è¨€ä»£ç æ³¨å…¥åˆ°å½“å‰è¯·æ±‚çš„ Tests ä¸­
    pm.test(script);
}

// æ¡ä»¶æ‰§è¡Œï¼ˆå¦‚ä»…åœ¨éæœ¬åœ°ç¯å¢ƒæ‰§è¡Œï¼‰
if (pm.environment.get("envType") !== "local") {
    addGlobalAssertion();
}
```

---

### æ–¹æ¡ˆ 3ï¼šé€šè¿‡ Newman å‘½ä»¤è¡Œæ·»åŠ å…¨å±€æ–­è¨€

**åŸç†ï¼š** Newman è¿è¡Œæ—¶é€šè¿‡è„šæœ¬å‚æ•°æ³¨å…¥å…¨å±€æ–­è¨€ã€‚
**ç¤ºä¾‹ä»£ç ï¼š**

```js
// newman-run.js è„šæœ¬å†…å®¹
const { Collection } = require('postman-collection');

module.exports = {
    beforeRun: (collection) => {
        collection.items.forEach(item => {
            if (item.request) {
                item.test = new Collection.ItemTest({
                    script: {
                        exec: [
                            "pm.test(\"å…¨å±€çŠ¶æ€ç æ ¡éªŒ\", function() {",
                            "    pm.response.to.be.success;",
                            "});",
                            "pm.test(\"å…¨å±€å“åº”å¤´æ ¡éªŒ\", function() {",
                            "    pm.response.to.have.header(\"X-Request-ID\");",
                            "});"
                        ].join('\n')
                    }
                });
            }
        });
    }
};
```

**æ‰§è¡Œå‘½ä»¤ï¼š**

```
newman run collection.json --script newman-run.js
```

---

## å…¨å±€æ–­è¨€ä¸å±€éƒ¨æ–­è¨€çš„ä¼˜å…ˆçº§æ§åˆ¶

| æ–­è¨€ä½ç½®               | ä¼˜å…ˆçº§ | åº”ç”¨åœºæ™¯               |
| ------------------ | --- | ------------------ |
| å•ä¸ªæ¥å£çš„ Tests        | æœ€é«˜  | é’ˆå¯¹ç‰¹å®šæ¥å£çš„ç‰¹æ®ŠéªŒè¯        |
| Folder çº§ Tests     | ä¸­   | åˆ†ç»„æ¥å£çš„å…¬å…±éªŒè¯          |
| Collection çº§ Tests | æœ€ä½  | å…¨é‡æ¥å£çš„åŸºç¡€éªŒè¯ï¼ˆçŠ¶æ€ç ã€å“åº”å¤´ï¼‰ |

**å†²çªè§£å†³æ–¹æ¡ˆï¼š**
æ¥å£çº§ Tests ä¸­ä½¿ç”¨ `pm.test.remove()` ç§»é™¤ä¸éœ€è¦çš„å…¨å±€æ–­è¨€ï¼š

```js
// ç§»é™¤é›†åˆä¸­çš„å…¨å±€å“åº”æ—¶é—´æ–­è¨€
pm.test.remove("å…¨å±€å“åº”æ—¶é—´æ ¡éªŒ");
```

---


# ğŸ§ª Postman æ‰¹é‡è¿è¡Œæµ‹è¯•ç”¨ä¾‹

åœ¨ Postman ä¸­æ‰¹é‡è¿è¡Œæµ‹è¯•ç”¨ä¾‹ï¼Œä¸»è¦é€šè¿‡ Collection Runner åŠŸèƒ½æ¥å®ç°ï¼Œä»¥ä¸‹æ˜¯å…·ä½“æ­¥éª¤ï¼š

## 1. åˆ›å»ºé›†åˆå’Œç»„ç»‡ç”¨ä¾‹

* ç‚¹å‡»å·¦ä¾§ â€œCollectionsâ€ çš„ â€œâ•â€ æŒ‰é’®åˆ›å»ºé›†åˆï¼Œè¾“å…¥é›†åˆåç§°ã€‚
* é€‰ä¸­é›†åˆç‚¹å‡» â€œâ‹¯â€ â†’ **Add Folder** æ·»åŠ æ¨¡å—æ–‡ä»¶å¤¹ã€‚
* å†é€‰ä¸­æ–‡ä»¶å¤¹ç‚¹å‡» **Add Request** æ·»åŠ æ¥å£æµ‹è¯•ç”¨ä¾‹ï¼Œé…ç½®è¯·æ±‚å‚æ•°ã€æ–­è¨€è„šæœ¬ï¼Œå°†æ¥å£ç»„ç»‡åˆ°é›†åˆä¸­ã€‚

### 2. é€‰æ‹©è¿è¡Œæ–¹å¼

* âœ… ç‚¹å‡»é›†åˆå³ä¸Šè§’ **Run**ï¼šå…¨æ¨¡å—å›å½’æµ‹è¯•ã€‚
* âœ… ç‚¹å‡»æ–‡ä»¶å¤¹å³ä¸Šè§’ **Run folder**ï¼šå•æ¨¡å—è¿­ä»£æµ‹è¯•ã€‚

### 3. é…ç½® Runner å‚æ•°

* **Iterations**ï¼šè®¾ç½®æµ‹è¯•è¿­ä»£æ¬¡æ•°ã€‚
* **Delay**ï¼šè®¾ç½®æ¥å£è°ƒç”¨é—´éš”ï¼ˆå•ä½ï¼šmsï¼‰ã€‚
* **Data**ï¼šå¯¼å…¥ CSV / JSON æ–‡ä»¶è¿›è¡Œå‚æ•°åŒ–ã€‚
* **Advanced settings**ï¼š

  * âœ… å‹¾é€‰ â€œPersist responsesâ€ ä¿å­˜å“åº”ã€‚
  * ğŸ” é€‰æ‹© â€œRun orderâ€ æ§åˆ¶æ‰§è¡Œé¡ºåºï¼ˆæŒ‰æ–‡ä»¶å¤¹é¡ºåºæˆ–éšæœºæ‰§è¡Œï¼‰ã€‚

### 4. æ‰§è¡Œæ‰¹é‡æµ‹è¯•

ç‚¹å‡» **Run** æˆ– **Run æ–‡ä»¶å¤¹åç§°** æŒ‰é’®ï¼Œå³å¯æ‰¹é‡è¿è¡Œæµ‹è¯•ç”¨ä¾‹ã€‚

### 5. åˆ†æè¿è¡Œç»“æœ

* ğŸ“Š æ±‡æ€»ä¿¡æ¯ï¼šè¿è¡Œæ—¶é—´ã€è¿­ä»£æ¬¡æ•°ã€é€šè¿‡/å¤±è´¥æ•°é‡ã€å¹³å‡å“åº”æ—¶é—´ç­‰ã€‚
* ğŸ” å•æ¥å£è¯¦æƒ…ï¼šçŠ¶æ€ç ã€å“åº”æ—¶é—´ã€å“åº”ä½“ã€æ–­è¨€ç»“æœã€é”™è¯¯ä¿¡æ¯ã€‚

---

# ğŸ“‚ Postman æ•°æ®é©±åŠ¨æµ‹è¯•

## âœ… CSV å‚æ•°åŒ–æµ‹è¯•

### ğŸ“ CSV æ–‡ä»¶æ ¼å¼è¦æ±‚

* ç¬¬ä¸€è¡Œä¸ºè¡¨å¤´ï¼Œåç»­è¡Œä¸ºæ•°æ®ã€‚
* ä½¿ç”¨è‹±æ–‡é€—å· `,` åˆ†éš”ï¼Œè‹¥å­—æ®µå«é€—å·ï¼Œéœ€ç”¨åŒå¼•å·åŒ…è£¹ã€‚

ç¤ºä¾‹æ–‡ä»¶ `users.csv`ï¼š

```csv
username,password,expected_status
admin,admin123,200
guest,guest456,200
invalid_user,wrong_pwd,401
```

### ğŸ“¥ å¯¼å…¥ CSV æ­¥éª¤

1. Runner ä¸­é€‰æ‹©é›†åˆæˆ–æ–‡ä»¶å¤¹ â†’ ç‚¹å‡» **Select File**ã€‚
2. é€‰æ‹© CSV æ–‡ä»¶ â†’ Postman è‡ªåŠ¨è¯†åˆ«å˜é‡åå¹¶é¢„è§ˆæ•°æ®ã€‚

### ğŸ”— è¯·æ±‚ä¸­å¼•ç”¨å˜é‡

* URL å‚æ•°ï¼š

  ```
  https://api.com/login?username={{username}}
  ```
* è¯·æ±‚ä½“å‚æ•°ï¼š

  ```json
  {
    "username": "{{username}}",
    "password": "{{password}}"
  }
  ```
* åœ¨æ–­è¨€ä¸­ä½¿ç”¨ï¼š

  ```js
  pm.test("çŠ¶æ€ç æ ¡éªŒ", function() {
    pm.response.to.have.status(pm.iterationData.get("expected_status"));
  });
  ```

---

## âœ… JSON å‚æ•°åŒ–æµ‹è¯•

### ğŸ“ JSON æ–‡ä»¶æ ¼å¼è¦æ±‚

* æ ¹èŠ‚ç‚¹ä¸ºæ•°ç»„ï¼Œæ¯ç»„å¯¹è±¡ä¸ºä¸€ç»„æµ‹è¯•æ•°æ®ã€‚

ç¤ºä¾‹ `orders.json`ï¼š

```json
[
  {
    "productId": "P001",
    "quantity": 1,
    "price": 99.9,
    "expectedTotal": 99.9
  },
  {
    "productId": "P002",
    "quantity": 3,
    "price": 49.9,
    "expectedTotal": 149.7
  }
]
```

### ğŸ“¥ å¯¼å…¥ JSON æ­¥éª¤

* åŒæ ·åœ¨ Runner ä¸­é€‰æ‹© JSON æ–‡ä»¶ï¼ŒPostman è‡ªåŠ¨è¯†åˆ«å˜é‡ã€‚

### ğŸ”— å¼•ç”¨æ–¹å¼ç¤ºä¾‹

* URL å‚æ•°ï¼š

  ```
  https://api.com/order/{{productId}}
  ```
* è¯·æ±‚ä½“å‚æ•°ï¼š

  ```json
  {
    "quantity": {{quantity}},
    "unitPrice": {{price}}
  }
  ```
* JSON æ–­è¨€ï¼š

  ```js
  pm.test("é‡‘é¢è®¡ç®—æ­£ç¡®", function() {
    const response = pm.response.json();
    pm.expect(response.total).to.eql(pm.iterationData.get("expectedTotal"));
  });
  ```

---

# ğŸ§¾ è¯·æ±‚å¿…é¡»æºå¸¦çš„è¯·æ±‚å¤´è¯´æ˜

| è¯·æ±‚å¤´å             | è¯´æ˜                 | ç¤ºä¾‹å€¼                                 |
| ---------------- | ------------------ | ----------------------------------- |
| Host             | æŒ‡å®šç›®æ ‡ä¸»æœºï¼ˆHTTP/1.1è¦æ±‚ï¼‰ | `api.example.com`                   |
| Connection       | æ˜¯å¦ä¿æŒé•¿è¿æ¥            | `keep-alive`                        |
| Accept           | å¯æ¥å—çš„å“åº”æ ¼å¼           | `application/json`                  |
| X-Requested-With | æ˜¯å¦ä¸º AJAX è¯·æ±‚        | `XMLHttpRequest`                    |
| User-Agent       | å®¢æˆ·ç«¯èº«ä»½æ ‡è¯†            | `Mozilla/5.0...`                    |
| Referer          | è¯·æ±‚æ¥æºé¡µé¢ URL         | `https://example.com`               |
| Cookie           | æºå¸¦çš„ Cookie ä¿¡æ¯      | `session_id=123456; user_token=abc` |
| Content-Type     | è¯·æ±‚ä½“çš„æ ¼å¼ç±»å‹           | `application/json`                  |

---

# ğŸ”§ Postmanæ¥å£Mock ServieræœåŠ¡å™¨

## ğŸ§ª Mock Server æ ¸å¿ƒä»·å€¼ä¸åº”ç”¨åœºæ™¯

### æ ¸å¿ƒä»·å€¼

è§£å†³ç—›ç‚¹ï¼šåç«¯æ¥å£å°šæœªå¼€å‘å®Œæˆæ—¶ï¼Œå‰ç«¯å¯é€šè¿‡ Mock Server æ¨¡æ‹Ÿæ¥å£å“åº”ï¼Œå®ç°å¹¶è¡Œå¼€å‘ï¼Œæå‡å¼€å‘æ•ˆç‡ã€‚

### åº”ç”¨åœºæ™¯

* å‰åç«¯åˆ†ç¦»å¼€å‘ï¼Œåç«¯è¿›åº¦æ»åæ—¶å‰ç«¯å¯ç‹¬ç«‹è°ƒè¯•
* æµ‹è¯•å¤æ‚ä¸šåŠ¡æµç¨‹ï¼ˆå¦‚æ”¯ä»˜å›è°ƒã€çŠ¶æ€å˜æ›´ï¼‰
* æ¨¡æ‹Ÿå¼‚å¸¸æƒ…å†µï¼ˆå¦‚ç½‘ç»œè¶…æ—¶ã€æœåŠ¡å™¨é”™è¯¯ï¼‰

---

## âš™ï¸ åˆ›å»º Mock Server å…¨æµç¨‹ï¼ˆä»¥ç”¨æˆ·ç¤ºä¾‹ä¸ºä¾‹ï¼‰

### 1. å‡†å¤‡ Mock å“åº”æ•°æ®

ç¤ºä¾‹ JSONï¼ˆæ³¨æ„é€—å·æ ¼å¼ï¼‰ï¼š

```json
{
  "error_code": 0,
  "msg": "è¿”å›æˆåŠŸ",
  "data": []
}
```

### 2. åœ¨ Postman ä¸­åˆ›å»º Mock Server

**æ­¥éª¤å¦‚ä¸‹ï¼š**

1. åˆ›å»º Collectionï¼š

   * ç‚¹å‡»å·¦ä¾§ Collections â†’ â• â†’ å‘½åä¸ºâ€œå‰ç«¯ Mock æ¥å£â€
   * æ·»åŠ è¯·æ±‚ï¼ˆå¦‚ GET/POSTï¼‰â†’ å‘½åä¸ºâ€œè·å–æ•°æ®æ¥å£â€

2. é…ç½®è¯·æ±‚ä¸å“åº”ï¼š

   * è¯·æ±‚ URL å¯è‡ªå®šä¹‰ï¼Œå¦‚ï¼š`https://mock-api.com/data/query`
   * åˆ‡æ¢è‡³ Response æ ‡ç­¾é¡µ â†’ é€‰æ‹© `raw` â†’ ç²˜è´´ JSON
   * è®¾ç½®çŠ¶æ€ç ä¸º `200 OK`

3. ç”Ÿæˆ Mock Serverï¼š

   * ç‚¹å‡» Collection çš„ `â€¦` â†’ é€‰æ‹© `Generate Mock Server`
   * è®¾ç½®åŸŸåï¼ˆå¦‚ï¼š`mock-server.postman.com`ï¼‰
   * ç‚¹å‡» Create Mock â†’ å¤åˆ¶ç”Ÿæˆçš„ Mock URLï¼Œå¦‚ï¼š
     `https://postman-echo.com/mock/12345/data/query`

---

### 3. å‰ç«¯è°ƒç”¨ Mock æ¥å£ç¤ºä¾‹ï¼ˆJavaScriptï¼‰

```js
fetch("https://postman-echo.com/mock/12345/data/query", {
  method: "GET",
  headers: {
    "Content-Type": "application/json"
  }
})
.then(response => response.json())
.then(data => {
  console.log("æ¥å£è¿”å›:", data);
  // æ¸²æŸ“æˆ–å¤„ç†æ•°æ®
})
.catch(error => {
  console.error("è¯·æ±‚é”™è¯¯:", error);
});
```

---

# ğŸª Postman çš„ Cookie é‰´æƒæœºåˆ¶

## 1. Cookie æ˜¯ä»€ä¹ˆ

* ç”±æœåŠ¡å™¨ç”Ÿæˆçš„å°æ®µ `key=value` æ ¼å¼æ–‡æœ¬
* å­˜å‚¨åœ¨æµè§ˆå™¨æˆ– Postman ä¸­ï¼Œç”¨äºèº«ä»½éªŒè¯ã€ä¼šè¯æ§åˆ¶ç­‰

## 2. é‰´æƒæµç¨‹

1. å½“å®¢æˆ·ç«¯ç¬¬ä¸€æ¬¡è®¿é—®æœåŠ¡å™¨çš„æ—¶å€™,é‚£ä¹ˆæœåŠ¡å™¨å°±ä¼šç”ŸæˆCookieä¿¡æ¯,å¹¶ä¸”åœ¨å“åº”å¤´çš„set-cookieé‡Œé¢æŠŠç”Ÿæˆçš„cookieä¿¡æ¯å‘é€ç»™å®¢æˆ·ç«¯ã€‚
2. å½“å®¢æˆ·ç«¯ç¬¬2-Næ¬¡è®¿é—®æœåŠ¡å™¨çš„æ—¶å€™,é‚£ä¹ˆå®¢æˆ·ç«¯å°±ä¼šåœ¨è¯·æ±‚å¤´çš„cookieå¸¦ä¸Šcookieä¿¡æ¯,ä»è€Œå®ç°é‰´æƒ

```text
é¦–æ¬¡è¯·æ±‚ â†’ æœåŠ¡å™¨ç”Ÿæˆ Set-Cookie å“åº”å¤´ â†’ å®¢æˆ·ç«¯ä¿å­˜ Cookie
â†“
åç»­è¯·æ±‚ â†’ å®¢æˆ·ç«¯è‡ªåŠ¨é™„å¸¦ Cookie è¯·æ±‚å¤´ â†’ æœåŠ¡å™¨å®Œæˆèº«ä»½æ ¡éªŒ
```

### 3. Cookie ç±»å‹å¯¹æ¯”

| ç±»å‹        | å­˜å‚¨ä½ç½® | ç”Ÿå‘½å‘¨æœŸ       | å®‰å…¨æ€§ | åº”ç”¨åœºæ™¯     |
| --------- | ---- | ---------- | --- | -------- |
| ä¼šè¯ Cookie | å†…å­˜   | æµè§ˆå™¨å…³é—­å³å¤±æ•ˆ   | è¾ƒä½  | è´­ç‰©è½¦ã€ä¸´æ—¶ç™»å½• |
| æŒä¹… Cookie | ç¡¬ç›˜   | è®¾å®šçš„è¿‡æœŸæ—¶é—´å‰æœ‰æ•ˆ | è¾ƒé«˜  | è®°ä½æˆ‘ã€é•¿æœŸç™»å½• |

---

# ğŸ” Postman å®ç°æ¥å£åŠ å¯†ä¸è§£å¯†

## ä¸»æµåŠ å¯†ç®—æ³•åˆ†ç±»

| ç±»å‹    | ä»£è¡¨ç®—æ³•               | ç‰¹ç‚¹            | åº”ç”¨åœºæ™¯      |
| ----- | ------------------ | ------------- | --------- |
| å¯¹ç§°åŠ å¯†  | AES / DES / Base64 | åŠ è§£å¯†ä½¿ç”¨åŒä¸€å¯†é’¥ï¼Œé€Ÿåº¦å¿« | è¯·æ±‚ä½“æ•°æ®åŠ å¯†   |
| éå¯¹ç§°åŠ å¯† | RSA / ECC          | å…¬é’¥åŠ å¯†ç§é’¥è§£å¯†ï¼Œè¾ƒå®‰å…¨  | æ•°å­—ç­¾åã€å¯†é’¥äº¤æ¢ |
| å•å‘å“ˆå¸Œ  | MD5 / SHA256       | ä¸å¯é€†ï¼Œç”¨äºéªŒè¯å®Œæ•´æ€§   | å¯†ç å­˜å‚¨ã€æ•°æ®ç­¾å |

---

## Postman ä¸­åŠ å¯†å®ç°æ–¹å¼

### âœ… ä½¿ç”¨å†…ç½® CryptoJSï¼ˆæ¨èï¼‰

Postman å†…ç½®äº† Crypto-js åº“ï¼Œæ”¯æŒ AESã€MD5ã€SHA ç­‰å¤šç§åŠ å¯†ç®—æ³•ã€‚

**AES åŠ å¯†è¯·æ±‚ä½“ï¼š**

```js
// åœ¨Pre-request Scriptä¸­æ·»åŠ 
const CryptoJS = require('crypto-js');

// å¾…åŠ å¯†æ•°æ®
const data = JSON.stringify({
    "username": "test",
    "password": "123456"
});

// å¯†é’¥ï¼ˆéœ€ä¸åç«¯ä¿æŒä¸€è‡´ï¼‰
const secretKey = "1234567890123456"; // 16å­—èŠ‚å¯†é’¥ï¼ˆAES-128ï¼‰

// AESåŠ å¯†ï¼ˆECBæ¨¡å¼ + PKCS7å¡«å……ï¼‰
const encrypted = CryptoJS.AES.encrypt(data, secretKey, {
    mode: CryptoJS.mode.ECB,
    padding: CryptoJS.pad.Pkcs7
}).toString();

// è®¾ç½®åŠ å¯†åçš„æ•°æ®åˆ°è¯·æ±‚ä½“
pm.request.body.raw = encrypted;
```

**MD5 ç­¾åï¼š**

```js
// åœ¨Pre-request Scriptä¸­æ·»åŠ 
const CryptoJS = require('crypto-js');

// å¾…ç­¾åæ•°æ®
const signData = "param1=value1&param2=value2";
const secretKey = "your-api-secret";

// ç”ŸæˆMD5ç­¾å
const signature = CryptoJS.MD5(signData + secretKey).toString();

// æ·»åŠ ç­¾ååˆ°è¯·æ±‚å¤´
pm.request.headers.upsert({
    key: "X-Signature",
    value: signature
});
```

---

### ğŸ”„ å¤–éƒ¨ JS æ–‡ä»¶å¯¼å…¥

**encrypt.js æ–‡ä»¶ï¼š**

```js
function aesEncrypt(data, key) {
  const CryptoJS = require('crypto-js');
  return CryptoJS.AES.encrypt(data, key).toString();
}
```

**ä½¿ç”¨æ–¹å¼ï¼š**

```js
eval(pm.globals.get("encryptScript")); // ä»å…¨å±€å˜é‡è·å–è„šæœ¬å†…å®¹
const encrypted = aesEncrypt("æ•æ„Ÿæ•°æ®", "å¯†é’¥");
```

---

## ğŸ” è§£å¯†å“åº”æ•°æ®ï¼ˆTests è„šæœ¬ä¸­ï¼‰

### åœ¨ Tests è„šæœ¬ä¸­è§£å¯†å“åº”

```js
// åœ¨Testsè„šæœ¬ä¸­æ·»åŠ 
const CryptoJS = require('crypto-js');

// ä»å“åº”è·å–åŠ å¯†æ•°æ®
const encryptedData = pm.response.text();
const secretKey = "1234567890123456";

// AESè§£å¯†
const bytes = CryptoJS.AES.decrypt(encryptedData, secretKey);
const decryptedData = JSON.parse(bytes.toString(CryptoJS.enc.Utf8));

// æ–­è¨€è§£å¯†åçš„æ•°æ®
pm.expect(decryptedData.code).to.eql(0);
pm.expect(decryptedData.data.username).to.eql("test");
```

### ä½¿ç”¨ç¯å¢ƒå˜é‡å­˜å‚¨è§£å¯†ç»“æœ

```js
// è§£å¯†åå­˜å‚¨åˆ°ç¯å¢ƒå˜é‡ä¾›åç»­è¯·æ±‚ä½¿ç”¨
pm.environment.set("decryptedData", decryptedData);
```

---

## ğŸ” åŠ å¯†åœºæ™¯ç¤ºä¾‹

**RSA åŠ å¯†ï¼ˆä½¿ç”¨å…¬é’¥ï¼‰ï¼š**

```js
// åœ¨Pre-request Scriptä¸­æ·»åŠ ï¼ˆéœ€å…ˆå¯¼å…¥jsrsasignåº“ï¼‰
const JSEncrypt = require('jsencrypt');

// å…¬é’¥ï¼ˆä»ç¯å¢ƒå˜é‡è·å–ï¼‰
const publicKey = pm.environment.get("rsaPublicKey");

// å¾…åŠ å¯†æ•°æ®
const data = "æ•æ„Ÿä¿¡æ¯";

// åŠ å¯†
const encrypt = new JSEncrypt();
encrypt.setPublicKey(publicKey);
const encrypted = encrypt.encrypt(data);

// è®¾ç½®åˆ°è¯·æ±‚ä½“
pm.request.body.raw = encrypted;
```

**å¸¦æ—¶é—´æˆ³çš„ç­¾åéªŒè¯ï¼š**

```js
// Pre-request Script
const CryptoJS = require('crypto-js');
const timestamp = new Date().getTime();

// ç”Ÿæˆç­¾å
const signData = `timestamp=${timestamp}&api_key=your_key`;
const signature = CryptoJS.SHA256(signData + pm.environment.get("apiSecret")).toString();

// æ·»åŠ åˆ°è¯·æ±‚å¤´
pm.request.headers.upsert({ key: "X-Timestamp", value: timestamp });
pm.request.headers.upsert({ key: "X-Signature", value: signature });

// Testsè„šæœ¬éªŒè¯å“åº”ç­¾å
pm.test("å“åº”ç­¾åéªŒè¯", function() {
    const responseSign = pm.response.headers.get("X-Response-Sign");
    const expectedSign = CryptoJS.SHA256(pm.response.text() + pm.environment.get("apiSecret")).toString();
    pm.expect(responseSign).to.eql(expectedSign);
});
```

---

å¥½çš„ï¼Œä»¥ä¸‹æ˜¯é’ˆå¯¹ä½ æä¾›çš„ **Newman** ç›¸å…³å†…å®¹çš„æ•´ç†ï¼Œå¸¦æœ‰é€‚å½“è¡¨æƒ…æç¤ºï¼Œä¿æŒç®€æ´ä¸”æ˜“è¯»ï¼š

---

# ğŸš€ Newman

## ğŸš€ Newman æ ¸å¿ƒä»·å€¼ä¸åº”ç”¨åœºæ™¯

**å®šä½**ï¼šPostman çš„å‘½ä»¤è¡Œè¿è¡Œå™¨ï¼Œé€‚åˆè‡ªåŠ¨åŒ–æ‰§è¡Œæµ‹è¯•è„šæœ¬ï¼Œå®Œç¾é€‚é… CI/CD æµæ°´çº¿ã€‚

**æ ¸å¿ƒä¼˜åŠ¿**ï¼š

* ğŸ–¥ï¸ è„±ç¦» GUIï¼Œå¯é›†æˆ Jenkinsã€GitLab CI ç­‰è‡ªåŠ¨åŒ–å·¥å…·
* ğŸ”„ æ”¯æŒæ‰¹é‡è¿è¡Œã€å‚æ•°åŒ–æµ‹è¯•ã€ç”Ÿæˆæ ‡å‡†åŒ–æŠ¥å‘Š
* ğŸŒ è·¨å¹³å°ï¼ˆLinux/Windows/Macï¼‰ï¼Œæ”¯æŒå›¢é˜Ÿåä½œ

---

## ğŸ›  Newman å®‰è£…ä¸åŸºç¡€ä½¿ç”¨

### å®‰è£…

```bash
npm install -g newman
```

ï¼ˆéœ€å…ˆå®‰è£… Node.jsï¼‰

### åŸºç¡€å‘½ä»¤ç»“æ„

```bash
newman run [collectionæ–‡ä»¶è·¯å¾„] [é€‰é¡¹å‚æ•°]
```

### æ ¸å¿ƒå‚æ•°è¯´æ˜

| å‚æ•°                | ä½œç”¨                   | ç¤ºä¾‹                                           |
| ----------------- | -------------------- | -------------------------------------------- |
| `-e`              | æŒ‡å®šç¯å¢ƒå˜é‡æ–‡ä»¶ (JSON)      | `-e environments/test.json`                  |
| `-g`              | æŒ‡å®šå…¨å±€å˜é‡æ–‡ä»¶ (JSON)      | `-g globals/prod.json`                       |
| `-d`              | å‚æ•°åŒ–æµ‹è¯•æ•°æ®æ–‡ä»¶ (CSV/JSON) | `-d data/users.csv`                          |
| `-n`              | è¿­ä»£æ¬¡æ•°                 | `-n 5` ï¼ˆæ¯ä¸ªç”¨ä¾‹æ‰§è¡Œ 5 æ¬¡ï¼‰                          |
| `-r`              | æŠ¥å‘Šæ ¼å¼ï¼ˆæ”¯æŒå¤šç§ç»„åˆï¼‰         | `-r cli,html,json,junit`                     |
| `--reporter-*`    | å®šåˆ¶æŠ¥å‘Šè¾“å‡ºï¼ˆå¦‚HTMLè·¯å¾„ï¼‰      | `--reporter-html-export reports/result.html` |
| `--delay-request` | è¯·æ±‚é—´éš”ï¼ˆæ¯«ç§’ï¼‰             | `--delay-request 500`                        |
| `--insecure`      | å…è®¸å¿½ç•¥ HTTPS è¯ä¹¦éªŒè¯      | `--insecure`                                 |

---

## ğŸƒâ€â™‚ï¸ ä» Postman åˆ° Newman çš„å®Œæ•´æµç¨‹

### 1. å¯¼å‡º Collection å’Œ Environment

* Postman â†’ é€‰æ‹©é›†åˆ â†’ ç‚¹å‡» `...` â†’ Export â†’ ä¿å­˜ä¸º `collection.json`
* é€‰æ‹©ç¯å¢ƒ â†’ ç‚¹å‡» `...` â†’ Export â†’ ä¿å­˜ä¸º `environment.json`

### 2. æ‰§è¡ŒåŸºæœ¬æµ‹è¯•

```bash
# è¿è¡Œé›†åˆï¼Œä½¿ç”¨æµ‹è¯•ç¯å¢ƒå˜é‡
newman run collection.json -e environment.json
```

### 3. å‚æ•°åŒ–æµ‹è¯•ç¤ºä¾‹

```bash
# ä½¿ç”¨CSVæ•°æ®æ–‡ä»¶è¿›è¡Œå‚æ•°åŒ–æµ‹è¯•ï¼Œç”ŸæˆHTMLæŠ¥å‘Š
newman run collection.json -e test.env.json -d data/users.csv -n 3 -r html --reporter-html-export reports/test-result.html
```

### 4. å¹¶å‘ä¸å…¨å±€å˜é‡ç¤ºä¾‹

```bash
# æ¨¡æ‹Ÿ10ä¸ªå¹¶å‘ç”¨æˆ·ï¼Œæ‰§è¡Œ5æ¬¡è¿­ä»£ï¼Œè¾“å‡ºJUnitæ ¼å¼æŠ¥å‘Š
newman run collection.json -g globals.json -n 5 --concurrency 10 -r junit --reporter-junit-export reports/junit.xml
```

---

# ğŸ¤– Postman + Newman + Jenkins æŒç»­é›†æˆå®æˆ˜

## æ ¸å¿ƒæ­¥éª¤é€Ÿè§ˆ

1. ç¯å¢ƒå‡†å¤‡

   * å®‰è£… Jenkinsï¼ˆæ¨è Docker éƒ¨ç½²ï¼‰
   * å®‰è£… Node.js å’Œ Newmanï¼ˆJenkins èŠ‚ç‚¹ï¼‰
   * å¯¼å‡º Postman Collection å’Œç¯å¢ƒå˜é‡æ–‡ä»¶

2. Jenkins é…ç½®

   * æ–°å»ºè‡ªç”±é£æ ¼é¡¹ç›®
   * é…ç½® Git æºç ç®¡ç†
   * æ·»åŠ æ„å»ºæ­¥éª¤ï¼Œæ‰§è¡Œ Newman å‘½ä»¤

3. æŠ¥å‘Šé›†æˆ

   * å®‰è£… HTML Publisher æ’ä»¶
   * é…ç½®æŠ¥å‘Šè·¯å¾„
   * ä¿å­˜å¹¶è§¦å‘æ„å»º

---

## ğŸ–¥ è¯¦ç»†æ“ä½œæ­¥éª¤

### ç¯å¢ƒå‡†å¤‡

```bash
# Dockerå®‰è£… Jenkinsï¼ˆæ¨èï¼‰
docker run -d -p 8080:8080 -v jenkins_home:/var/jenkins_home jenkins/jenkins:lts
```

```bash
# JenkinsèŠ‚ç‚¹å®‰è£… Newman
npm install -g newman newman-reporter-html
```

* å¯¼å‡º Postman Collectionï¼ˆ`collection.json`ï¼‰ä¸ç¯å¢ƒå˜é‡æ–‡ä»¶ï¼ˆ`environment.json`ï¼‰

---

### Jenkins é¡¹ç›®é…ç½®

1. æ–°å»ºé¡¹ç›®

   * ç‚¹å‡» New Item â†’ è¾“å…¥é¡¹ç›®å â†’ é€‰æ‹© Freestyle project

2. æºç ç®¡ç†

   * é€‰æ‹© Git â†’ è¾“å…¥ä»“åº“åœ°å€ â†’ é…ç½®è®¤è¯ä¿¡æ¯

3. æ„å»ºæ­¥éª¤

   * æ·»åŠ  Execute shellï¼ˆLinux/macOSï¼‰ï¼š

```bash
newman run collection.json \
  -e environment.json \
  -r html \
  --reporter-html-export reports/index.html
```

4. æ„å»ºåæ“ä½œ

   * æ·»åŠ  Publish HTML reports æ’ä»¶é…ç½®

     * Report name: APIæµ‹è¯•æŠ¥å‘Š
     * Directory: reports
     * Index page: index.html

---

## ğŸ” å…³é”®å‘½ä»¤è§£æ

```bash
newman run collection.json \
  -e environment.json \          # ç¯å¢ƒå˜é‡
  -d data.csv \                  # å‚æ•°åŒ–æµ‹è¯•æ•°æ®ï¼ˆå¯é€‰ï¼‰
  -n 5 \                        # è¿­ä»£æ¬¡æ•°ï¼ˆå¯é€‰ï¼‰
  -r html \                     # ç”ŸæˆHTMLæŠ¥å‘Š
  --reporter-html-export reports/index.html  # æŠ¥å‘Šè·¯å¾„
```

---

## âš ï¸ å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ

| é—®é¢˜         | è§£å†³æ–¹æ¡ˆ                                                  |
| ---------- | ----------------------------------------------------- |
| Newman æœªæ‰¾åˆ° | æ£€æŸ¥ Node.js ä¸ Newman æ˜¯å¦å®‰è£…ï¼Œæˆ–ä½¿ç”¨ç»å¯¹è·¯å¾„ï¼ˆå¦‚ `/usr/bin/newman`ï¼‰ |
| æŠ¥å‘Šä¸ºç©º       | ç¡®è®¤å‘½ä»¤ä¸­çš„æŠ¥å‘Šè·¯å¾„ä¸ Jenkins é…ç½®ä¸€è‡´ï¼Œç¡®è®¤ Newman æ‰§è¡ŒæˆåŠŸ               |
| ä¸­æ–‡ä¹±ç        | æ·»åŠ å‚æ•° `--reporter-html-encoding utf-8`                 |
| ç¯å¢ƒå˜é‡ä¸ç”Ÿæ•ˆ    | ç¡®ä¿ `environment.json` æ ¼å¼æ­£ç¡®ï¼Œå˜é‡åä¸ Postman ä¸€è‡´            |

---

## âœ… æ‰§è¡Œæ•ˆæœéªŒè¯

1. è§¦å‘ Jenkins æ„å»º
2. æ„å»ºæˆåŠŸåï¼Œç‚¹å‡»å·¦ä¾§èœå•ä¸­çš„ â€œAPIæµ‹è¯•æŠ¥å‘Šâ€
3. æŸ¥çœ‹æµ‹è¯•ç»“æœï¼ˆæˆåŠŸç‡ã€å“åº”æ—¶é—´ã€å¤±è´¥ç”¨ä¾‹ï¼‰

---

## å†™åœ¨æœ€å

é€šè¿‡æœ¬æ¬¡ç³»ç»Ÿæ€§å­¦ä¹ ï¼Œæˆ‘å¯¹æ¥å£æµ‹è¯•ä»åŸç†ã€æµç¨‹ã€å·¥å…·åˆ°è‡ªåŠ¨åŒ–çš„æ•´ä¸ªé“¾è·¯æœ‰äº†æ¸…æ™°çš„è®¤è¯†ï¼ŒPostman ä¸ä»…é€‚åˆæ‰‹åŠ¨è°ƒè¯•ï¼Œè¿˜å¯ä»¥æ­é… Newman å®ç°å®Œæ•´çš„è‡ªåŠ¨åŒ–æ–¹æ¡ˆï¼Œæœªæ¥åœ¨é¡¹ç›®ä¸­æˆ‘ä¹Ÿä¼šæŒç»­å°†è¿™äº›æ–¹æ³•åº”ç”¨äºå®è·µä¸­ã€‚

å¦‚æœä½ åˆšå…¥é—¨æ¥å£æµ‹è¯•ï¼Œå¸Œæœ›è¿™ä»½æ•´ç†å¯¹ä½ æœ‰æ‰€å¸®åŠ©ï¼Œä¹Ÿæ¬¢è¿äº¤æµã€è®¨è®ºæ›´å¤šå®æˆ˜ç»éªŒ ğŸ™Œã€‚

