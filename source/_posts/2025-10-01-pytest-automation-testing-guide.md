---
title: ğŸš€ Pytestè‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶å…¥é—¨åˆ°å®æˆ˜ï¼šæˆ‘çš„å­¦ä¹ ç¬”è®°ä¸å®æˆ˜ç»éªŒ
subtitle: ä»åŸºç¡€åˆ°é«˜çº§ï¼Œä»ç†è®ºåˆ°å®è·µï¼Œå…¨é¢æŒæ¡Pythonæµ‹è¯•åˆ©å™¨
date: 2025-10-01 18:00:00
tags:
  - pytest
  - è‡ªåŠ¨åŒ–æµ‹è¯•
  - Pythonæµ‹è¯•
  - æµ‹è¯•æ¡†æ¶
  - å­¦ä¹ ç¬”è®°
  - Python
categories:
- è‡ªåŠ¨åŒ–æµ‹è¯• & å·¥å…·å¼€å‘ï¼ˆTest Automation & Tool Developmentï¼‰
  - æµ‹è¯•æ¡†æ¶
  - è‡ªåŠ¨åŒ–æµ‹è¯•
updated: {{current_date_time}}
keywords: pytest, è‡ªåŠ¨åŒ–æµ‹è¯•, Pythonæµ‹è¯•, æµ‹è¯•æ¡†æ¶, å­¦ä¹ ç¬”è®°, Python
description: 'å…¨é¢çš„Pytestè‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶å­¦ä¹ ç¬”è®°ï¼Œä»åŸºç¡€æ¦‚å¿µåˆ°é«˜çº§ç‰¹æ€§ï¼Œç»“åˆå®æˆ˜ç»éªŒï¼ŒåŠ©ä½ å¿«é€ŸæŒæ¡Pythonæµ‹è¯•åˆ©å™¨ã€‚'
top_img: /img/pytest.png
cover: /img/pytest.png
comments: true
toc: true
toc_number: true
toc_style_simple: false
copyright: true
copyright_author: yuxiaoling
copyright_info: ç‰ˆæƒæ‰€æœ‰ï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚
mathjax: false
katex: false
abcjs: false
aplayer: false
highlight_shrink: false
aside: true
noticeOutdate: false
---

# ğŸš€ Pytestè‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶å…¥é—¨åˆ°å®æˆ˜ï¼šæˆ‘çš„å­¦ä¹ ç¬”è®°ä¸å®æˆ˜ç»éªŒ

ğŸ˜Š å¤§å®¶å¥½ï¼æœ€è¿‘æˆ‘ç³»ç»Ÿå­¦ä¹ äº†pytestè‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶ï¼ä½œä¸ºä¸€åæµ‹è¯•å·¥ç¨‹å¸ˆï¼ŒæŒæ¡ä¸€ä¸ªé«˜æ•ˆçš„æµ‹è¯•æ¡†æ¶å¯¹æé«˜å·¥ä½œæ•ˆç‡è‡³å…³é‡è¦ã€‚ä»Šå¤©æˆ‘å°±æŠŠè¿™æ®µæ—¶é—´çš„å­¦ä¹ ç¬”è®°å’Œå®æˆ˜ç»éªŒæ•´ç†å‡ºæ¥ï¼Œå¸Œæœ›èƒ½å¸®åŠ©åˆ°æ­£åœ¨å­¦ä¹ æˆ–å‡†å¤‡å­¦ä¹ è‡ªåŠ¨åŒ–æµ‹è¯•çš„æœ‹å‹ä»¬ï¼

ğŸ“š æœ¬æ–‡åŸºäºç™½æœˆé»‘ç¾½ç¼–ç¨‹çš„pytestè‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶ç³»åˆ—è¯¾ç¨‹ï¼Œå¼ºçƒˆæ¨èç»™æƒ³ç³»ç»Ÿå­¦ä¹ çš„åŒå­¦ï¼š
- **è§†é¢‘è¯¾ç¨‹**ï¼š[pytestè‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶ - å“”å“©å“”å“©](https://www.bilibili.com/video/BV1bV41167a4?vd_source=65c2968c09490f4b218154711916b4d8)
- **å›¾æ–‡æ•™ç¨‹**ï¼š[pytestæ¡†æ¶ - ç™½æœˆé»‘ç¾½å®˜ç½‘](https://www.byhy.net/auto/pyatframework/pytest-01/)

## ğŸŒŸ ä¸€ã€ä¸ºä»€ä¹ˆé€‰æ‹©Pytestï¼Ÿ

åœ¨å¼€å§‹å­¦ä¹ ä¹‹å‰ï¼Œæˆ‘ä¹Ÿå¯¹æ¯”äº†å¸‚é¢ä¸Šå‡ ç§ä¸»æµçš„Pythonæµ‹è¯•æ¡†æ¶ï¼Œæœ€ç»ˆé€‰æ‹©pytestæ˜¯å› ä¸ºå®ƒçœŸçš„å¤ªé¦™äº†ï¼

### âœ… pytestçš„æ ¸å¿ƒä¼˜åŠ¿

- **ç®€å•æ˜“ç”¨**ï¼šå‡½æ•°å¼çš„æµ‹è¯•ç¼–å†™æ–¹å¼ï¼Œå‘Šåˆ«ç¹ççš„æ ·æ¿ä»£ç 
- **æ™ºèƒ½å‘ç°**ï¼šè‡ªåŠ¨è¯†åˆ«æµ‹è¯•æ–‡ä»¶å’Œå‡½æ•°ï¼Œæ— éœ€æ‰‹åŠ¨æ³¨å†Œ
- **æ’ä»¶ç”Ÿæ€**ï¼šæ‹¥æœ‰800+æ’ä»¶ï¼Œå‡ ä¹èƒ½æ»¡è¶³æ‰€æœ‰æµ‹è¯•éœ€æ±‚
- **å¼ºå¤§æ–­è¨€**ï¼šåŸç”Ÿassertè¯­å¥ï¼Œå¤±è´¥æ—¶è‡ªåŠ¨æ˜¾ç¤ºä¸Šä¸‹æ–‡ä¿¡æ¯
- **å‚æ•°åŒ–æµ‹è¯•**ï¼šä¸€è¡Œä»£ç å®ç°å¤šç»„æ•°æ®æµ‹è¯•ï¼Œå¤§å¹…å‡å°‘é‡å¤ä»£ç 
- **å…¼å®¹æ€§å¥½**ï¼šæ”¯æŒè¿è¡Œunittestå’Œnoseç¼–å†™çš„æµ‹è¯•
- **fixtureæœºåˆ¶**ï¼šæ¯”ä¼ ç»Ÿsetup/teardownæ›´çµæ´»çš„èµ„æºç®¡ç†æ–¹æ¡ˆ

### ğŸ’¡ ä¸ªäººä½“éªŒ

ä½œä¸ºä¸€ä¸ªä»unittestè½¬å‘pytestçš„æµ‹è¯•å·¥ç¨‹å¸ˆï¼Œæœ€ç›´è§‚çš„æ„Ÿå—å°±æ˜¯ï¼š
> **ä»£ç é‡å‡å°‘äº†ï¼Œæµ‹è¯•æ•ˆç‡æé«˜äº†ï¼Œç»´æŠ¤æˆæœ¬é™ä½äº†ï¼**

ä¹‹å‰å†™unittestæµ‹è¯•æ—¶ï¼Œæ€»æ˜¯è¦å†™å¾ˆå¤šç»§æ‰¿å’Œ setUp/tearDown æ–¹æ³•ï¼Œè€Œpytestè®©æµ‹è¯•ä»£ç å˜å¾—æ›´åŠ ç®€æ´å’Œä¸“æ³¨äºæµ‹è¯•é€»è¾‘æœ¬èº«ã€‚

## ğŸ“¦ äºŒã€ç¯å¢ƒæ­å»ºï¼šä»é›¶å¼€å§‹

### 2.1 åŸºç¡€å®‰è£…

å®‰è£…pytestéå¸¸ç®€å•ï¼Œä¸€æ¡pipå‘½ä»¤æå®šï¼š

```bash
# å®‰è£…pytest
pip install pytest

# éªŒè¯å®‰è£…
pytest --version
```

### 2.2 æ¨èæ’ä»¶å®‰è£…

åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œæˆ‘æ¨èå®‰è£…ä»¥ä¸‹å‡ ä¸ªå¸¸ç”¨æ’ä»¶ï¼Œå®ƒä»¬èƒ½æå¤§æå‡æµ‹è¯•æ•ˆç‡ï¼š

```bash
# ç”Ÿæˆç¾è§‚çš„HTMLæµ‹è¯•æŠ¥å‘Š
pip install pytest-html

# å¹¶è¡Œæ‰§è¡Œæµ‹è¯•ï¼Œå¤§å¹…æå‡æµ‹è¯•é€Ÿåº¦
pip install pytest-xdist

# æä¾›mockåŠŸèƒ½ï¼Œæ–¹ä¾¿æ¨¡æ‹Ÿä¾èµ–
pip install pytest-mock

# æµ‹è¯•è¦†ç›–ç‡ç»Ÿè®¡
pip install pytest-cov
```

### ğŸ”§ ç¯å¢ƒé…ç½®å°æŠ€å·§

ä¸ºäº†è®©å›¢é˜Ÿåä½œæ›´é¡ºç•…ï¼Œæˆ‘é€šå¸¸ä¼šåœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»ºä¸€ä¸ª`requirements-test.txt`æ–‡ä»¶ï¼Œå°†æ‰€æœ‰æµ‹è¯•ä¾èµ–éƒ½åˆ—åœ¨é‡Œé¢ï¼š

```txt
pytest==7.4.0
pytest-html==3.2.0
pytest-xdist==3.3.1
pytest-mock==3.10.0
pytest-cov==4.1.0
```

è¿™æ ·å›¢é˜Ÿæˆå‘˜å°±å¯ä»¥é€šè¿‡`pip install -r requirements-test.txt`ä¸€é”®å®‰è£…æ‰€æœ‰ä¾èµ–äº†ï¼

## ğŸ” ä¸‰ã€å¿«é€Ÿä¸Šæ‰‹ï¼šç¬¬ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹

### 3.1 æµ‹è¯•ç”¨ä¾‹ç»“æ„

pytestçš„æµ‹è¯•ç”¨ä¾‹ç»“æ„éå¸¸ç®€æ´ï¼Œè®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š

```python
# test_math.py
def add(x, y):
    """ä¸€ä¸ªç®€å•çš„åŠ æ³•å‡½æ•°"""
    return x + y

def test_add_positive():
    """æµ‹è¯•æ­£æ•°ç›¸åŠ """
    result = add(2, 3)
    assert result == 5, f"2 + 3 åº”è¯¥ç­‰äº 5ï¼Œä½†å¾—åˆ°çš„æ˜¯ {result}"

def test_add_negative():
    """æµ‹è¯•è´Ÿæ•°ç›¸åŠ """
    result = add(-1, -2)
    assert result == -3, f"-1 + (-2) åº”è¯¥ç­‰äº -3ï¼Œä½†å¾—åˆ°çš„æ˜¯ {result}"

def test_add_mixed():
    """æµ‹è¯•æ­£è´Ÿæ··åˆç›¸åŠ """
    result = add(5, -3)
    assert result == 2, f"5 + (-3) åº”è¯¥ç­‰äº 2ï¼Œä½†å¾—åˆ°çš„æ˜¯ {result}"
```

### 3.2 å‘½åè§„åˆ™ï¼ˆé‡ç‚¹ï¼ï¼‰

pytesté€šè¿‡ç‰¹å®šçš„å‘½åè§„åˆ™æ¥è‡ªåŠ¨å‘ç°æµ‹è¯•ç”¨ä¾‹ï¼š

- **æ–‡ä»¶å**ï¼šä»¥`test_`å¼€å¤´æˆ–ä»¥`_test`ç»“å°¾ï¼ˆå¦‚`test_login.py`æˆ–`login_test.py`ï¼‰
- **æµ‹è¯•å‡½æ•°**ï¼šä»¥`test_`å¼€å¤´
- **æµ‹è¯•ç±»**ï¼šä»¥`Test`å¼€å¤´ï¼Œå¹¶ä¸”ä¸èƒ½åŒ…å«`__init__`æ–¹æ³•
- **æµ‹è¯•æ–¹æ³•**ï¼šç±»ä¸­ä»¥`test_`å¼€å¤´çš„æ–¹æ³•

### 3.3 è¿è¡Œæµ‹è¯•

è¿è¡Œpytestæµ‹è¯•æœ‰å¤šç§æ–¹å¼ï¼Œæˆ‘æ€»ç»“äº†å‡ ä¸ªæœ€å¸¸ç”¨çš„ï¼š

#### ğŸƒâ€â™‚ï¸ åŸºæœ¬è¿è¡Œ

```bash
# è¿è¡Œå½“å‰ç›®å½•ä¸‹æ‰€æœ‰æµ‹è¯•
pytest

# è¿è¡Œç‰¹å®šæ–‡ä»¶
pytest test_math.py

# è¿è¡Œç‰¹å®šå‡½æ•°
pytest test_math.py::test_add_positive
```

#### ğŸ“Š è¯¦ç»†è¾“å‡º

```bash
# è¯¦ç»†æ¨¡å¼ï¼šæ˜¾ç¤ºæ¯ä¸ªæµ‹è¯•çš„æ‰§è¡Œæƒ…å†µ
pytest -v

# æ˜¾ç¤ºprintè¾“å‡º
pytest -s

# ç»„åˆä½¿ç”¨
pytest -vs
```

#### ğŸ“ˆ ç”ŸæˆæŠ¥å‘Š

```bash
# ç”ŸæˆHTMLæŠ¥å‘Š
pytest --html=report.html
```

### ğŸ’» æˆ‘çš„ç¬¬ä¸€ä¸ªpytestå®æˆ˜

è®°å¾—ç¬¬ä¸€æ¬¡ä½¿ç”¨pytestæ—¶ï¼Œæˆ‘æŠŠä¸€ä¸ªä½¿ç”¨unittestç¼–å†™çš„æµ‹è¯•æ¨¡å—è½¬æ¢æˆäº†pytesté£æ ¼ï¼Œä»£ç é‡å‡å°‘äº†è¿‘40%ï¼è¿™è®©æˆ‘æ·±åˆ»ä½“ä¼šåˆ°äº†pytestçš„ç®€æ´ä¹‹ç¾ã€‚

## ğŸ”§ å››ã€æ·±å…¥ç†è§£Fixtureï¼špytestçš„çµé­‚

Fixtureæ˜¯pytestæœ€å¼ºå¤§çš„ç‰¹æ€§ä¹‹ä¸€ï¼Œå®ƒæä¾›äº†çµæ´»çš„èµ„æºç®¡ç†æ–¹æ¡ˆã€‚æˆ‘è®¤ä¸ºç†è§£å¹¶ç†Ÿç»ƒä½¿ç”¨fixtureæ˜¯æŒæ¡pytestçš„å…³é”®ï¼

### 4.1 FixtureåŸºç¡€

```python
import pytest

@pytest.fixture
def sample_data():
    """æä¾›æµ‹è¯•æ•°æ®çš„fixture"""
    print("å‡†å¤‡æµ‹è¯•æ•°æ®...")
    data = [1, 2, 3, 4, 5]
    yield data  # è¿”å›æµ‹è¯•æ•°æ®ç»™æµ‹è¯•å‡½æ•°
    print("æ¸…ç†æµ‹è¯•æ•°æ®...")
    # yieldä¹‹åçš„ä»£ç ä¼šåœ¨æµ‹è¯•ç»“æŸåæ‰§è¡Œï¼ˆæ— è®ºæˆåŠŸå¤±è´¥ï¼‰

def test_sum(sample_data):
    """ä½¿ç”¨fixtureæä¾›çš„æ•°æ®è¿›è¡Œæµ‹è¯•"""
    assert sum(sample_data) == 15
```

### 4.2 Fixtureçš„ä½œç”¨åŸŸ

fixtureå¯ä»¥å®šä¹‰ä¸åŒçš„ä½œç”¨åŸŸï¼Œæ§åˆ¶å…¶åˆå§‹åŒ–å’Œæ¸…ç†çš„æ—¶æœºï¼š

| ä½œç”¨åŸŸ | è¯´æ˜ | ä½¿ç”¨åœºæ™¯ |
|--------|------|----------|
| `function` | æ¯ä¸ªæµ‹è¯•å‡½æ•°æ‰§è¡Œä¸€æ¬¡ï¼ˆé»˜è®¤ï¼‰ | æµ‹è¯•æ•°æ®å‡†å¤‡ |
| `class` | æ¯ä¸ªæµ‹è¯•ç±»æ‰§è¡Œä¸€æ¬¡ | ç±»çº§åˆ«å…±äº«èµ„æº |
| `module` | æ¯ä¸ªæ¨¡å—æ‰§è¡Œä¸€æ¬¡ | æ¨¡å—çº§å…±äº«èµ„æº |
| `session` | æ•´ä¸ªæµ‹è¯•ä¼šè¯æ‰§è¡Œä¸€æ¬¡ | æ•°æ®åº“è¿æ¥ã€APIå®¢æˆ·ç«¯ |

```python
@pytest.fixture(scope="module")
def db_connection():
    """æ•°æ®åº“è¿æ¥fixtureï¼Œæ•´ä¸ªæ¨¡å—å…±äº«"""
    print("å»ºç«‹æ•°æ®åº“è¿æ¥")
    conn = {"status": "connected"}
    yield conn
    print("å…³é—­æ•°æ®åº“è¿æ¥")
```

### 4.3 Conftest.pyï¼šå…±äº«fixtureçš„æœ€ä½³å®è·µ

`conftest.py`æ˜¯pytestçš„ä¸€ä¸ªç‰¹æ®Šæ–‡ä»¶ï¼Œç”¨äºå­˜æ”¾å…±äº«çš„fixtureå’Œhookå‡½æ•°ã€‚æˆ‘åœ¨é¡¹ç›®ä¸­ç»å¸¸è¿™æ ·ä½¿ç”¨å®ƒï¼š

```python
# conftest.py
import pytest
import requests

@pytest.fixture(scope="session")
def api_client():
    """APIæµ‹è¯•å®¢æˆ·ç«¯fixture"""
    print("åˆå§‹åŒ–APIå®¢æˆ·ç«¯")
    client = requests.Session()
    client.headers.update({"Content-Type": "application/json"})
    client.base_url = "https://api.example.com"
    yield client
    print("å…³é—­APIå®¢æˆ·ç«¯")
    client.close()

@pytest.fixture
def auth_headers():
    """è®¤è¯å¤´ä¿¡æ¯fixture"""
    return {
        "Authorization": "Bearer token123"
    }
```

### ğŸ“ å®æˆ˜ç»éªŒåˆ†äº«

åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œæˆ‘é€šå¸¸ä¼šåˆ›å»ºå¤šä¸ªfixtureæ¥ç®¡ç†ä¸åŒçš„èµ„æºï¼š

- `setup_database()`: åˆå§‹åŒ–æµ‹è¯•æ•°æ®åº“
- `mock_user()`: æä¾›æµ‹è¯•ç”¨æˆ·æ•°æ®
- `mock_api()`: æ¨¡æ‹Ÿå¤–éƒ¨APIå“åº”
- `browser()`: Web UIæµ‹è¯•çš„æµè§ˆå™¨å®ä¾‹

è¿™ç§æ¨¡å—åŒ–çš„fixtureè®¾è®¡è®©æµ‹è¯•ä»£ç æ›´åŠ æ¸…æ™°å’Œæ˜“äºç»´æŠ¤ï¼

## ğŸ¯ äº”ã€çµæ´»çš„æµ‹è¯•é€‰æ‹©ä¸æ‰§è¡Œ

åœ¨å¤§å‹é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ä¸éœ€è¦æ¯æ¬¡éƒ½è¿è¡Œæ‰€æœ‰æµ‹è¯•ã€‚pytestæä¾›äº†å¤šç§æ–¹å¼æ¥é€‰æ‹©ç‰¹å®šçš„æµ‹è¯•ç”¨ä¾‹ã€‚

### 5.1 ç²¾ç¡®é€‰æ‹©æµ‹è¯•

```bash
# æŒ‰æ¨¡å—é€‰æ‹©
pytest tests/test_auth.py

# æŒ‰ç›®å½•é€‰æ‹©
pytest tests/api/

# æŒ‰å‡½æ•°é€‰æ‹©
pytest tests/test_auth.py::test_login_success

# æŒ‰ç±»å’Œæ–¹æ³•é€‰æ‹©
pytest tests/test_user.py::TestUserProfile::test_update_profile
```

### 5.2 ä½¿ç”¨-kå‚æ•°æ¨¡ç³ŠåŒ¹é…

```bash
# è¿è¡Œåç§°åŒ…å«loginçš„æ‰€æœ‰æµ‹è¯•
pytest -k "login"

# è¿è¡Œåç§°åŒ…å«loginä½†ä¸åŒ…å«invalidçš„æµ‹è¯•
pytest -k "login and not invalid"

# è¿è¡Œåç§°åŒ…å«loginæˆ–registerçš„æµ‹è¯•
pytest -k "login or register"
```

### 5.3 ä½¿ç”¨æ ‡è®°ï¼ˆmarkï¼‰ç»„ç»‡æµ‹è¯•

æ ‡è®°æ˜¯pytestä¸­ç»„ç»‡å’Œåˆ†ç±»æµ‹è¯•çš„å¼ºå¤§å·¥å…·ï¼Œæˆ‘åœ¨é¡¹ç›®ä¸­å¤§é‡ä½¿ç”¨å®ƒï¼š

```python
import pytest

@pytest.mark.smoke  # å†’çƒŸæµ‹è¯•æ ‡è®°
@pytest.mark.critical  # å…³é”®åŠŸèƒ½æ ‡è®°
def test_login():
    """ç™»å½•åŠŸèƒ½å†’çƒŸæµ‹è¯•"""
    assert True

@pytest.mark.regression  # å›å½’æµ‹è¯•æ ‡è®°
def test_user_profile():
    """ç”¨æˆ·èµ„æ–™å›å½’æµ‹è¯•"""
    assert True

@pytest.mark.slow  # æ…¢æµ‹è¯•æ ‡è®°
@pytest.mark.expensive  # èµ„æºå¯†é›†å‹æµ‹è¯•æ ‡è®°
def test_large_data_import():
    """å¤§æ•°æ®å¯¼å…¥æµ‹è¯•"""
    assert True
```

ç„¶ååœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º`pytest.ini`æ–‡ä»¶æ³¨å†Œè¿™äº›æ ‡è®°ï¼š

```ini
[pytest]
markers =
    smoke: å†’çƒŸæµ‹è¯•ç”¨ä¾‹
    regression: å›å½’æµ‹è¯•ç”¨ä¾‹
    critical: å…³é”®åŠŸèƒ½æµ‹è¯•
    slow: æ‰§è¡Œæ—¶é—´è¾ƒé•¿çš„æµ‹è¯•
    expensive: èµ„æºå¯†é›†å‹æµ‹è¯•
    integration: é›†æˆæµ‹è¯•ç”¨ä¾‹
```

è¿è¡Œç‰¹å®šæ ‡è®°çš„æµ‹è¯•ï¼š

```bash
# è¿è¡Œå†’çƒŸæµ‹è¯•
pytest -m smoke

# è¿è¡Œå†’çƒŸå’Œå…³é”®åŠŸèƒ½æµ‹è¯•
pytest -m "smoke or critical"

# è¿è¡Œå›å½’æµ‹è¯•ä½†æ’é™¤æ…¢æµ‹è¯•
pytest -m "regression and not slow"
```

### ğŸ’¡ å·¥ä½œæµå»ºè®®

åœ¨å›¢é˜Ÿåä½œä¸­ï¼Œæˆ‘å»ºè®®è¿™æ ·ç»„ç»‡æµ‹è¯•ï¼š

1. æäº¤ä»£ç å‰ï¼šè¿è¡Œ`pytest -m smoke`ç¡®ä¿åŸºæœ¬åŠŸèƒ½æ­£å¸¸
2. æ¯æ—¥æ„å»ºï¼šè¿è¡Œ`pytest -m "smoke or critical"`
3. å¤œé—´æ„å»ºï¼šè¿è¡Œæ‰€æœ‰æµ‹è¯•`pytest`
4. å‘å¸ƒå‰ï¼šè¿è¡Œ`pytest -m regression`è¿›è¡Œå…¨é¢å›å½’

è¿™æ ·æ—¢èƒ½ä¿è¯ä»£ç è´¨é‡ï¼Œåˆèƒ½æé«˜å¼€å‘æ•ˆç‡ï¼

## ğŸ”„ å…­ã€æ•°æ®é©±åŠ¨æµ‹è¯•ï¼šè®©æµ‹è¯•æ›´é«˜æ•ˆ

æ•°æ®é©±åŠ¨æµ‹è¯•æ˜¯è‡ªåŠ¨åŒ–æµ‹è¯•çš„æ ¸å¿ƒæ€æƒ³ä¹‹ä¸€ï¼Œpytesté€šè¿‡`@pytest.mark.parametrize`è£…é¥°å™¨æä¾›äº†ä¼˜é›…çš„æ”¯æŒã€‚

### 6.1 åŸºæœ¬å‚æ•°åŒ–

```python
import pytest

def add(x, y):
    return x + y

@pytest.mark.parametrize("a, b, expected", [
    (1, 2, 3),        # æ­£æ•°ç›¸åŠ 
    (-1, -1, -2),     # è´Ÿæ•°ç›¸åŠ 
    (0, 0, 0),        # é›¶å€¼æµ‹è¯•
    (1000, 2000, 3000)  # å¤§æ•°æµ‹è¯•
], ids=["positive", "negative", "zero", "large_numbers"])
def test_add(a, b, expected):
    """ä½¿ç”¨å¤šç»„æ•°æ®æµ‹è¯•åŠ æ³•å‡½æ•°"""
    result = add(a, b)
    assert result == expected, f"{a} + {b} åº”è¯¥ç­‰äº {expected}ï¼Œä½†å¾—åˆ°çš„æ˜¯ {result}"
```

### 6.2 å¤æ‚æ•°æ®ç»“æ„çš„å‚æ•°åŒ–

å¯¹äºæ›´å¤æ‚çš„æµ‹è¯•åœºæ™¯ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å­—å…¸æˆ–å¯¹è±¡ä½œä¸ºæµ‹è¯•æ•°æ®ï¼š

```python
@pytest.mark.parametrize("user_data, is_valid", [
    ({"username": "testuser", "email": "test@example.com", "password": "Pass123!"}, True),
    ({"username": "", "email": "test@example.com", "password": "Pass123!"}, False),
    ({"username": "testuser", "email": "invalid-email", "password": "Pass123!"}, False)
])
def test_user_registration(user_data, is_valid):
    """æµ‹è¯•ç”¨æˆ·æ³¨å†ŒåŠŸèƒ½"""
    # è¿™é‡Œæ˜¯æµ‹è¯•é€»è¾‘
    if is_valid:
        # éªŒè¯æœ‰æ•ˆç”¨æˆ·æ³¨å†ŒæˆåŠŸ
        pass
    else:
        # éªŒè¯æ— æ•ˆç”¨æˆ·è¢«æ­£ç¡®æ‹’ç»
        pass
```

### 6.3 ä»å¤–éƒ¨æ–‡ä»¶åŠ è½½æ•°æ®

åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œæˆ‘é€šå¸¸ä¼šå°†æµ‹è¯•æ•°æ®å­˜å‚¨åœ¨å¤–éƒ¨æ–‡ä»¶ä¸­ï¼Œè¿™æ ·æ›´æ˜“äºç»´æŠ¤ï¼š

```python
import yaml
import json
import pytest

# ä»YAMLæ–‡ä»¶åŠ è½½æ•°æ®
@pytest.mark.parametrize("test_data", yaml.safe_load(open("test_data.yaml")))
def test_from_yaml(test_data):
    """ä»YAMLæ–‡ä»¶åŠ è½½æµ‹è¯•æ•°æ®"""
    a, b, expected = test_data
    assert a + b == expected

# ä»JSONæ–‡ä»¶åŠ è½½æ•°æ®
@pytest.mark.parametrize("test_data", json.load(open("test_data.json")))
def test_from_json(test_data):
    """ä»JSONæ–‡ä»¶åŠ è½½æµ‹è¯•æ•°æ®"""
    a, b, expected = test_data
    assert a + b == expected
```

æµ‹è¯•æ•°æ®æ–‡ä»¶ç¤ºä¾‹ï¼ˆtest_data.yamlï¼‰ï¼š

```yaml
- [1, 2, 3]
- [5, 5, 10]
- [-1, 1, 0]
```

### ğŸ’» æˆ‘çš„æ•°æ®é©±åŠ¨å®æˆ˜ç»éªŒ

åœ¨ä¸€ä¸ªAPIæµ‹è¯•é¡¹ç›®ä¸­ï¼Œæˆ‘ä½¿ç”¨å‚æ•°åŒ–æµ‹è¯•å®ç°äº†å¯¹å‡ åç§ä¸åŒAPIå“åº”çš„éªŒè¯ï¼Œåªç”¨äº†ä¸åˆ°100è¡Œä»£ç ï¼è¿™æ¯”ä¸ºæ¯ä¸ªå“åº”ç¼–å†™å•ç‹¬çš„æµ‹è¯•èŠ‚çœäº†å¤§é‡æ—¶é—´ã€‚

å…³é”®æ˜¯ï¼Œå½“APIè§„èŒƒæ›´æ–°æ—¶ï¼Œæˆ‘åªéœ€è¦æ›´æ–°æµ‹è¯•æ•°æ®æ–‡ä»¶ï¼Œè€Œä¸éœ€è¦ä¿®æ”¹æµ‹è¯•ä»£ç æœ¬èº«ï¼Œå¤§å¤§é™ä½äº†ç»´æŠ¤æˆæœ¬ã€‚

## ğŸš¨ ä¸ƒã€å¼‚å¸¸æµ‹è¯•ä¸ç‰¹æ®Šæ–­è¨€

### 7.1 æµ‹è¯•å¼‚å¸¸æŠ›å‡º

åœ¨æµ‹è¯•ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦éªŒè¯ä»£ç åœ¨ç‰¹å®šæƒ…å†µä¸‹ä¼šæŠ›å‡ºé¢„æœŸçš„å¼‚å¸¸ï¼š

```python
import pytest

def divide(x, y):
    """é™¤æ³•å‡½æ•°"""
    return x / y

def test_divide_by_zero():
    """æµ‹è¯•é™¤ä»¥é›¶åº”è¯¥æŠ›å‡ºZeroDivisionError"""
    with pytest.raises(ZeroDivisionError):
        divide(10, 0)

def test_divide_by_zero_message():
    """æµ‹è¯•å¼‚å¸¸æ¶ˆæ¯æ˜¯å¦ç¬¦åˆé¢„æœŸ"""
    with pytest.raises(ZeroDivisionError, match="division by zero"):
        divide(10, 0)
```

### 7.2 æµ‹è¯•è­¦å‘Š

å¯¹äºä¼šå‘å‡ºè­¦å‘Šçš„ä»£ç ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨`pytest.warns`ï¼š

```python
import pytest
import warnings

def deprecated_function():
    """å·²å¼ƒç”¨çš„å‡½æ•°"""
    warnings.warn("This function is deprecated", DeprecationWarning)
    return 42

def test_deprecated_function():
    """æµ‹è¯•å¼ƒç”¨è­¦å‘Š"""
    with pytest.warns(DeprecationWarning):
        result = deprecated_function()
        assert result == 42
```

### 7.3 æ ‡è®°é¢„æœŸå¤±è´¥çš„æµ‹è¯•

å¯¹äºå·²çŸ¥é—®é¢˜æˆ–å°šæœªå®ç°çš„åŠŸèƒ½ï¼Œæˆ‘ä»¬å¯ä»¥æ ‡è®°æµ‹è¯•ä¸ºé¢„æœŸå¤±è´¥ï¼š

```python
import pytest

@pytest.mark.xfail(reason="åŠŸèƒ½å°šæœªå®ç°")
def test_not_implemented_feature():
    """æµ‹è¯•å°šæœªå®ç°çš„åŠŸèƒ½"""
    # è¿™ä¸ªæµ‹è¯•é¢„æœŸä¼šå¤±è´¥
    assert False

@pytest.mark.xfail(raises=ZeroDivisionError)
def test_divide_by_zero_expected():
    """é¢„æœŸä¼šæŠ›å‡ºZeroDivisionErrorçš„æµ‹è¯•"""
    1 / 0  # è¿™ä¸ªæµ‹è¯•ä¼šé€šè¿‡ï¼Œå› ä¸ºæˆ‘ä»¬é¢„æœŸå®ƒä¼šæŠ›å‡ºZeroDivisionError
```

## ğŸ” å…«ã€å®ç”¨è°ƒè¯•æŠ€å·§

### 8.1 æ‰“å°è°ƒè¯•

æœ€åŸºæœ¬çš„è°ƒè¯•æ–¹æ³•æ˜¯ä½¿ç”¨printè¯­å¥è¾“å‡ºä¸­é—´å˜é‡çš„å€¼ï¼š

```python
def test_with_print():
    """ä½¿ç”¨printè¿›è¡Œè°ƒè¯•"""
    data = [1, 2, 3, 4, 5]
    print(f"æµ‹è¯•æ•°æ®: {data}")
    total = sum(data)
    print(f"è®¡ç®—ç»“æœ: {total}")
    assert total == 15
```

è¿è¡Œæ—¶ä½¿ç”¨`-s`å‚æ•°æ˜¾ç¤ºprintè¾“å‡ºï¼š
```bash
pytest -s test_file.py
```

### 8.2 ä½¿ç”¨æ–­ç‚¹è°ƒè¯•

Pythonçš„pdbè°ƒè¯•å™¨æ˜¯ä¸€ä¸ªå¼ºå¤§çš„å·¥å…·ï¼š

```python
def test_with_pdb():
    """ä½¿ç”¨pdbè¿›è¡Œè°ƒè¯•"""
    a = 1
    b = 2
    import pdb; pdb.set_trace()  # è®¾ç½®æ–­ç‚¹
    result = a + b
    assert result == 3
```

### 8.3 IDEé›†æˆè°ƒè¯•

å¯¹äºæ—¥å¸¸å¼€å‘ï¼Œæˆ‘å¼ºçƒˆæ¨èä½¿ç”¨PyCharmæˆ–VSCodeçš„é›†æˆè°ƒè¯•åŠŸèƒ½ï¼š

1. åœ¨ä»£ç ä¸­è®¾ç½®æ–­ç‚¹
2. å³é”®ç‚¹å‡»æµ‹è¯•å‡½æ•°ï¼Œé€‰æ‹©"Debug"
3. ä½¿ç”¨å•æ­¥æ‰§è¡Œã€å˜é‡æŸ¥çœ‹ç­‰åŠŸèƒ½è¿›è¡Œè°ƒè¯•

### 8.4 å¤±è´¥æ—¶ç«‹å³åœæ­¢

å½“æˆ‘ä»¬ä¿®å¤é—®é¢˜æ—¶ï¼Œé€šå¸¸å¸Œæœ›åœ¨ç¬¬ä¸€ä¸ªå¤±è´¥çš„æµ‹è¯•å¤„åœæ­¢ï¼Œä»¥ä¾¿å¿«é€Ÿå®šä½å’Œè§£å†³é—®é¢˜ï¼š

```bash
# åœ¨ç¬¬ä¸€ä¸ªå¤±è´¥å¤„åœæ­¢ï¼Œå¹¶æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯
pytest -xvs
```

### ğŸ’¡ æˆ‘çš„è°ƒè¯•å¿ƒå¾—

åœ¨å®é™…å·¥ä½œä¸­ï¼Œæˆ‘å‘ç°ä»¥ä¸‹è°ƒè¯•æµç¨‹éå¸¸æœ‰æ•ˆï¼š

1. é¦–å…ˆä½¿ç”¨`pytest -xvs`å¿«é€Ÿå®šä½å¤±è´¥çš„æµ‹è¯•
2. åˆ†æå¤±è´¥ä¿¡æ¯ï¼Œåˆ¤æ–­å¯èƒ½çš„åŸå› 
3. ä½¿ç”¨printè¯­å¥è¾“å‡ºå…³é”®å˜é‡çš„å€¼
4. å¯¹äºå¤æ‚é—®é¢˜ï¼Œä½¿ç”¨IDEçš„è°ƒè¯•å™¨è¿›è¡Œå•æ­¥è°ƒè¯•
5. ä¿®å¤é—®é¢˜åï¼Œå†æ¬¡è¿è¡Œæµ‹è¯•éªŒè¯

## ğŸ—ï¸ ä¹ã€å®é™…é¡¹ç›®ä¸­çš„æœ€ä½³å®è·µ

### 9.1 æ¨èçš„é¡¹ç›®ç»“æ„

ä¸€ä¸ªè‰¯å¥½çš„æµ‹è¯•é¡¹ç›®ç»“æ„å¯¹äºå›¢é˜Ÿåä½œè‡³å…³é‡è¦ï¼Œæˆ‘æ¨èè¿™æ ·ç»„ç»‡ï¼š

```
my_project/
â”œâ”€â”€ src/                # æºä»£ç ç›®å½•
â”‚   â””â”€â”€ my_package/     # è¢«æµ‹åŒ…
â”œâ”€â”€ tests/              # æµ‹è¯•ç›®å½•
â”‚   â”œâ”€â”€ conftest.py     # å…±äº«çš„fixtureå’Œhooks
â”‚   â”œâ”€â”€ fixtures/       # è‡ªå®šä¹‰fixtureæ¨¡å—
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ api_fixtures.py
â”‚   â”‚   â””â”€â”€ db_fixtures.py
â”‚   â”œâ”€â”€ data/           # æµ‹è¯•æ•°æ®ç›®å½•
â”‚   â”‚   â”œâ”€â”€ test_cases.yaml
â”‚   â”‚   â””â”€â”€ mock_responses/
â”‚   â”œâ”€â”€ unit/           # å•å…ƒæµ‹è¯•
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â””â”€â”€ test_utils.py
â”‚   â”œâ”€â”€ integration/    # é›†æˆæµ‹è¯•
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â””â”€â”€ test_api_integration.py
â”‚   â””â”€â”€ e2e/            # ç«¯åˆ°ç«¯æµ‹è¯•
â”‚       â”œâ”€â”€ __init__.py
â”‚       â””â”€â”€ test_user_flow.py
â”œâ”€â”€ requirements.txt    # ç”Ÿäº§ä¾èµ–
â”œâ”€â”€ requirements-test.txt  # æµ‹è¯•ä¾èµ–
â””â”€â”€ pytest.ini          # pytesté…ç½®æ–‡ä»¶
```

### 9.2 APIæµ‹è¯•å®æˆ˜æ¡ˆä¾‹

ä»¥ä¸‹æ˜¯æˆ‘åœ¨å®é™…é¡¹ç›®ä¸­ä½¿ç”¨pytestè¿›è¡ŒAPIæµ‹è¯•çš„ç®€åŒ–ç¤ºä¾‹ï¼š

```python
# tests/integration/test_auth_api.py
import pytest
import json

def test_login_success(api_client):
    """æµ‹è¯•æˆåŠŸç™»å½•"""
    # å‡†å¤‡æµ‹è¯•æ•°æ®
    payload = {
        "username": "valid_user",
        "password": "valid_password"
    }
    
    # å‘é€è¯·æ±‚
    response = api_client.post(
        f"{api_client.base_url}/auth/login",
        json=payload
    )
    
    # éªŒè¯å“åº”
    assert response.status_code == 200
    data = response.json()
    assert "access_token" in data
    assert data["user"]["username"] == "valid_user"

def test_login_invalid_credentials(api_client):
    """æµ‹è¯•æ— æ•ˆå‡­æ®ç™»å½•"""
    payload = {
        "username": "invalid_user",
        "password": "wrong_password"
    }
    
    response = api_client.post(
        f"{api_client.base_url}/auth/login",
        json=payload
    )
    
    assert response.status_code == 401
    data = response.json()
    assert data["error"] == "Invalid credentials"
```

### 9.3 æ•°æ®åº“æµ‹è¯•å®æˆ˜

å¯¹äºéœ€è¦è®¿é—®æ•°æ®åº“çš„æµ‹è¯•ï¼Œæˆ‘é€šå¸¸ä½¿ç”¨fixtureæ¥ç®¡ç†æµ‹è¯•æ•°æ®åº“ï¼š

```python
# conftest.py
import pytest
import sqlite3

@pytest.fixture
def test_db():
    """æä¾›æµ‹è¯•æ•°æ®åº“è¿æ¥"""
    # åˆ›å»ºå†…å­˜æ•°æ®åº“
    conn = sqlite3.connect(":memory:")
    cursor = conn.cursor()
    
    # åˆ›å»ºæµ‹è¯•è¡¨
    cursor.execute("""CREATE TABLE users (
                   id INTEGER PRIMARY KEY AUTOINCREMENT,
                   name TEXT NOT NULL,
                   email TEXT NOT NULL UNIQUE
                   )""")
    
    # æ’å…¥æµ‹è¯•æ•°æ®
    cursor.execute(
        "INSERT INTO users (name, email) VALUES (?, ?)",
        ("Test User", "test@example.com")
    )
    conn.commit()
    
    yield conn
    
    # æ¸…ç†èµ„æº
    conn.close()

# tests/unit/test_user_repository.py
def test_get_user_by_email(test_db):
    """æµ‹è¯•é€šè¿‡é‚®ç®±è·å–ç”¨æˆ·"""
    cursor = test_db.cursor()
    cursor.execute(
        "SELECT * FROM users WHERE email = ?",
        ("test@example.com",)
    )
    user = cursor.fetchone()
    
    assert user is not None
    assert user[1] == "Test User"
    assert user[2] == "test@example.com"
```

### ğŸ“ å®æˆ˜ç»éªŒæ€»ç»“

åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œæˆ‘æ€»ç»“äº†ä»¥ä¸‹å‡ ç‚¹pytestä½¿ç”¨ç»éªŒï¼š

1. **fixtureå‘½åè¦æ¸…æ™°**ï¼šä½¿ç”¨æè¿°æ€§çš„åç§°ï¼Œè¡¨æ˜å…¶ç”¨é€”
2. **åˆç†ä½¿ç”¨ä½œç”¨åŸŸ**ï¼šé¿å…ä¸å¿…è¦çš„èµ„æºåˆå§‹åŒ–å’Œæ¸…ç†
3. **å‚æ•°åŒ–æµ‹è¯•æ•°æ®**ï¼šå‡å°‘é‡å¤ä»£ç ï¼Œæé«˜æµ‹è¯•è¦†ç›–ç‡
4. **ä½¿ç”¨æ ‡è®°ç»„ç»‡æµ‹è¯•**ï¼šæ–¹ä¾¿åœ¨ä¸åŒåœºæ™¯ä¸‹é€‰æ‹©åˆé€‚çš„æµ‹è¯•é›†
5. **ç¼–å†™æœ‰æ„ä¹‰çš„æ–­è¨€æ¶ˆæ¯**ï¼šå¤±è´¥æ—¶æ›´å®¹æ˜“å®šä½é—®é¢˜
6. **ä¿æŒæµ‹è¯•ç‹¬ç«‹æ€§**ï¼šé¿å…æµ‹è¯•ä¹‹é—´çš„ç›¸äº’ä¾èµ–

## ğŸš€ åã€è¿›é˜¶åŠŸèƒ½ä¸æ¨èæ’ä»¶

### 10.1 å¹¶è¡Œæµ‹è¯•ï¼špytest-xdist

å¯¹äºå¤§å‹é¡¹ç›®ï¼Œå¹¶è¡Œæµ‹è¯•å¯ä»¥æ˜¾è‘—æé«˜æµ‹è¯•é€Ÿåº¦ï¼š

```bash
# ä½¿ç”¨4ä¸ªè¿›ç¨‹å¹¶è¡Œæ‰§è¡Œæµ‹è¯•
pytest -n 4

# è‡ªåŠ¨æ£€æµ‹CPUæ ¸å¿ƒæ•°å¹¶å¹¶è¡Œæ‰§è¡Œ
pytest -n auto
```

### 10.2 æµ‹è¯•è¦†ç›–ç‡ï¼špytest-cov

æµ‹è¯•è¦†ç›–ç‡å¯ä»¥å¸®åŠ©æˆ‘ä»¬äº†è§£ä»£ç çš„æµ‹è¯•æƒ…å†µï¼š

```bash
# æµ‹é‡è¦†ç›–ç‡å¹¶åœ¨ç»ˆç«¯æ˜¾ç¤º
pytest --cov=my_package

# ç”ŸæˆHTMLè¦†ç›–ç‡æŠ¥å‘Š
pytest --cov=my_package --cov-report=html
```

### 10.3 å‚æ•°åŒ–å¢å¼ºï¼špytest-cases

æä¾›æ›´å¼ºå¤§çš„å‚æ•°åŒ–åŠŸèƒ½ï¼š

```python
from pytest_cases import parametrize_with_cases

def case_positive_numbers():
    return 1, 2, 3

def case_negative_numbers():
    return -1, -2, -3

@parametrize_with_cases("a, b, expected", cases=[case_positive_numbers, case_negative_numbers])
def test_with_cases(a, b, expected):
    assert a + b == expected
```

### 10.4 æ€§èƒ½æµ‹è¯•ï¼špytest-benchmark

ç”¨äºåŸºå‡†æµ‹è¯•å’Œæ€§èƒ½æ¯”è¾ƒï¼š

```python
def test_my_function(benchmark):
    """æµ‹è¯•å‡½æ•°æ€§èƒ½"""
    result = benchmark(my_function)
    assert result is not None
```

### 10.5 å¸¸ç”¨æ’ä»¶æ±‡æ€»

| æ’ä»¶åç§° | åŠŸèƒ½æè¿° | æ¨èæŒ‡æ•° |
|---------|---------|----------|
| pytest-html | ç”ŸæˆHTMLæµ‹è¯•æŠ¥å‘Š | â­â­â­â­â­ |
| pytest-xdist | å¹¶è¡Œæ‰§è¡Œæµ‹è¯• | â­â­â­â­â­ |
| pytest-cov | æµ‹è¯•è¦†ç›–ç‡ç»Ÿè®¡ | â­â­â­â­â­ |
| pytest-mock | MockåŠŸèƒ½æ”¯æŒ | â­â­â­â­â­ |
| pytest-benchmark | åŸºå‡†æµ‹è¯•æ”¯æŒ | â­â­â­â­ |
| pytest-selenium | Web UIæµ‹è¯•é›†æˆ | â­â­â­â­ |
| pytest-ordering | æ§åˆ¶æµ‹è¯•æ‰§è¡Œé¡ºåº | â­â­â­ |
| pytest-django | Djangoé¡¹ç›®é›†æˆ | â­â­â­â­ |
| pytest-asyncio | å¼‚æ­¥æµ‹è¯•æ”¯æŒ | â­â­â­â­ |
| pytest-dotenv | ç¯å¢ƒå˜é‡ç®¡ç† | â­â­â­â­ |

## ğŸ’– å­¦ä¹ å¿ƒå¾—ä¸æ€»ç»“

å­¦ä¹ pytestçš„è¿™æ®µæ—¶é—´ï¼Œæˆ‘æ”¶è·é¢‡ä¸°ã€‚ä»æœ€åˆçš„ç®€å•ä½¿ç”¨ï¼Œåˆ°ç°åœ¨èƒ½å¤Ÿç†Ÿç»ƒåº”ç”¨å…¶å„ç§é«˜çº§ç‰¹æ€§ï¼Œpytestä¸ä»…æé«˜äº†æˆ‘çš„æµ‹è¯•æ•ˆç‡ï¼Œä¹Ÿè®©æˆ‘å¯¹è½¯ä»¶æµ‹è¯•æœ‰äº†æ›´æ·±çš„ç†è§£ã€‚

### ğŸ¯ æ ¸å¿ƒæ”¶è·

1. **æµ‹è¯•çš„æœ¬è´¨æ˜¯éªŒè¯**ï¼šå¥½çš„æµ‹è¯•åº”è¯¥æ¸…æ™°åœ°è¡¨è¾¾é¢„æœŸè¡Œä¸º
2. **ä»£ç è´¨é‡è‡³å…³é‡è¦**ï¼šæµ‹è¯•ä»£ç å’Œç”Ÿäº§ä»£ç ä¸€æ ·éœ€è¦ç»´æŠ¤
3. **è‡ªåŠ¨åŒ–æ˜¯æé«˜æ•ˆç‡çš„å…³é”®**ï¼šåˆç†ä½¿ç”¨è‡ªåŠ¨åŒ–æµ‹è¯•å¯ä»¥å¤§å¹…æé«˜å¼€å‘æ•ˆç‡å’Œè½¯ä»¶è´¨é‡
4. **å·¥å…·æ˜¯æ‰‹æ®µè€Œéç›®çš„**ï¼šé€‰æ‹©åˆé€‚çš„å·¥å…·å¹¶æ­£ç¡®ä½¿ç”¨æ‰æ˜¯æœ€é‡è¦çš„

### ğŸ“š åŠŸèƒ½æ¨¡å—æ¨èå·¥å…·æ±‡æ€»

| åŠŸèƒ½æ¨¡å— | æ¨èå·¥å…·æˆ–å†™æ³• | è¯´æ˜ |
|---------|---------------|------|
| æ–­è¨€æ–¹å¼ | `assert` + è¯¦ç»†æ¶ˆæ¯ | å¤±è´¥æ—¶è‡ªåŠ¨è¾“å‡ºä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œä¾¿äºè°ƒè¯• |
| æ•°æ®é©±åŠ¨ | `@pytest.mark.parametrize` | å¤šç»„æ•°æ®è‡ªåŠ¨ç”Ÿæˆæµ‹è¯•ç”¨ä¾‹ï¼Œå‡å°‘é‡å¤ä»£ç  |
| ç¯å¢ƒå‡†å¤‡ | `@pytest.fixture` | çµæ´»çš„èµ„æºç®¡ç†ï¼Œæ”¯æŒå¤šç§ä½œç”¨åŸŸ |
| æŠ¥å‘Šè¾“å‡º | `pytest-html` | ç”Ÿæˆç¾è§‚çš„HTMLæ ¼å¼æµ‹è¯•æŠ¥å‘Š |
| åˆ†ç»„æ‰§è¡Œ | `-m` å’Œ `-k` å‚æ•° | æŒ‰æ ‡è®°æˆ–åç§°çµæ´»é€‰æ‹©æµ‹è¯•ç”¨ä¾‹ |
| å¹¶å‘è¿è¡Œ | `pytest-xdist` | å¹¶è¡Œæ‰§è¡Œæµ‹è¯•ï¼Œæ˜¾è‘—æé«˜æµ‹è¯•é€Ÿåº¦ |
| æµ‹è¯•è¦†ç›–ç‡ | `pytest-cov` | æµ‹é‡ä»£ç è¦†ç›–ç‡ï¼ŒæŒ‡å¯¼æµ‹è¯•å®Œå–„ |
| æ€§èƒ½æµ‹è¯• | `pytest-benchmark` | è¿›è¡ŒåŸºå‡†æµ‹è¯•ï¼Œç›‘æ§æ€§èƒ½å˜åŒ– |

### ğŸš© æœªæ¥å­¦ä¹ æ–¹å‘

1. **æ·±å…¥ç ”ç©¶pytestæ’ä»¶å¼€å‘**ï¼šå¼€å‘å›¢é˜Ÿä¸“ç”¨çš„æµ‹è¯•æ’ä»¶
2. **ç»“åˆCI/CDæµç¨‹**ï¼šå°†è‡ªåŠ¨åŒ–æµ‹è¯•æ›´å¥½åœ°é›†æˆåˆ°æŒç»­é›†æˆæµç¨‹ä¸­
3. **æ¢ç´¢AIè¾…åŠ©æµ‹è¯•**ï¼šåˆ©ç”¨AIæŠ€æœ¯ä¼˜åŒ–æµ‹è¯•ç”¨ä¾‹è®¾è®¡å’Œç¼ºé™·åˆ†æ
4. **æ€§èƒ½æµ‹è¯•è¿›é˜¶**ï¼šå­¦ä¹ æ›´ä¸“ä¸šçš„æ€§èƒ½æµ‹è¯•å·¥å…·å’Œæ–¹æ³•

### ğŸ“£ æœ€åçš„è¯

è‡ªåŠ¨åŒ–æµ‹è¯•æ˜¯ä¸€ä¸ªæŒç»­å­¦ä¹ å’Œå®è·µçš„è¿‡ç¨‹ã€‚pytestä½œä¸ºä¸€ä¸ªåŠŸèƒ½å¼ºå¤§ã€è®¾è®¡ä¼˜é›…çš„æµ‹è¯•æ¡†æ¶ï¼Œä¸ºæˆ‘ä»¬æä¾›äº†å¼ºå¤§çš„æ”¯æŒã€‚ä½†æœ€é‡è¦çš„è¿˜æ˜¯æˆ‘ä»¬çš„æµ‹è¯•æ€ç»´å’Œæ–¹æ³•è®ºã€‚

å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¸®åŠ©åˆ°æ­£åœ¨å­¦ä¹ è‡ªåŠ¨åŒ–æµ‹è¯•çš„æœ‹å‹ä»¬ï¼å¦‚æœä½ æœ‰ä»»ä½•é—®é¢˜æˆ–å»ºè®®ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€è®¨è®ºã€‚è®©æˆ‘ä»¬ä¸€èµ·åœ¨è½¯ä»¶æµ‹è¯•çš„é“è·¯ä¸Šä¸æ–­è¿›æ­¥ï¼

---

ğŸ“ *æœ¬æ–‡æ•´ç†ï¼šåŸºäºç™½æœˆé»‘ç¾½ç¼–ç¨‹çš„pytestè¯¾ç¨‹å­¦ä¹ ç¬”è®°ï¼Œç»“åˆä¸ªäººå®æˆ˜ç»éªŒè¿›è¡Œäº†æ‰©å±•å’Œæ€»ç»“ã€‚*
